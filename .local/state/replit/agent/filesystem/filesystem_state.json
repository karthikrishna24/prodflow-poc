{"file_contents":{"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/EnvironmentNode.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Handle, Position } from \"reactflow\";\nimport { cn } from \"@/lib/utils\";\n\ninterface EnvironmentNodeProps {\n  id: string;\n  name: string;\n  env: \"staging\" | \"uat\" | \"prod\";\n  status: \"not_started\" | \"in_progress\" | \"blocked\" | \"done\";\n  tasksCompleted: number;\n  tasksTotal: number;\n  lastUpdate?: string;\n  onClick?: () => void;\n}\n\nconst envConfig = {\n  staging: { label: \"Staging\", className: \"bg-blue-500/10 text-blue-600 dark:text-blue-400\" },\n  uat: { label: \"UAT\", className: \"bg-amber-500/10 text-amber-600 dark:text-amber-400\" },\n  prod: { label: \"Production\", className: \"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400\" },\n};\n\nconst statusConfig = {\n  not_started: { dot: \"bg-muted-foreground\", label: \"Not Started\" },\n  in_progress: { dot: \"bg-blue-500\", label: \"In Progress\" },\n  blocked: { dot: \"bg-destructive\", label: \"Blocked\" },\n  done: { dot: \"bg-emerald-500\", label: \"Done\" },\n};\n\nexport default function EnvironmentNode({\n  id,\n  name,\n  env,\n  status,\n  tasksCompleted,\n  tasksTotal,\n  lastUpdate,\n  onClick,\n}: EnvironmentNodeProps) {\n  const envInfo = envConfig[env];\n  const statusInfo = statusConfig[status];\n  const progress = tasksTotal > 0 ? (tasksCompleted / tasksTotal) * 100 : 0;\n\n  return (\n    <>\n      <Handle type=\"target\" position={Position.Left} className=\"!bg-primary\" />\n      <Card\n        className=\"w-60 cursor-pointer hover-elevate active-elevate-2 transition-all overflow-visible\"\n        onClick={onClick}\n        data-testid={`card-environment-${id}`}\n      >\n        <div className=\"p-4 space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <Badge className={cn(\"text-xs font-medium\", envInfo.className)} data-testid={`badge-env-${id}`}>\n              {envInfo.label}\n            </Badge>\n            <div className=\"flex items-center gap-1.5\">\n              <div className={cn(\"h-2 w-2 rounded-full\", statusInfo.dot)} />\n              <span className=\"text-xs text-muted-foreground\">{statusInfo.label}</span>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <h3 className=\"font-semibold text-sm\" data-testid={`text-env-name-${id}`}>{name}</h3>\n            \n            <div className=\"space-y-1.5\">\n              <div className=\"flex items-center justify-between text-xs\">\n                <span className=\"text-muted-foreground\">Tasks</span>\n                <span className=\"font-medium font-mono\" data-testid={`text-tasks-${id}`}>\n                  {tasksCompleted}/{tasksTotal}\n                </span>\n              </div>\n              <div className=\"h-1.5 bg-muted rounded-full overflow-hidden\">\n                <div\n                  className={cn(\n                    \"h-full transition-all duration-300\",\n                    status === \"blocked\" ? \"bg-destructive\" : \"bg-primary\"\n                  )}\n                  style={{ width: `${progress}%` }}\n                />\n              </div>\n            </div>\n          </div>\n\n          {lastUpdate && (\n            <div className=\"text-xs text-muted-foreground\" data-testid={`text-last-update-${id}`}>\n              Updated {lastUpdate}\n            </div>\n          )}\n        </div>\n      </Card>\n      <Handle type=\"source\" position={Position.Right} className=\"!bg-primary\" />\n    </>\n  );\n}\n","size_bytes":3381},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/TaskFlowCanvas.tsx":{"content":"import { useCallback, useState, useMemo } from \"react\";\nimport ReactFlow, {\n  Background,\n  Controls,\n  Node,\n  Edge,\n  MarkerType,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  Connection,\n  ConnectionMode,\n} from \"reactflow\";\nimport \"reactflow/dist/style.css\";\nimport TaskCard from \"./TaskCard\";\nimport TaskDetailsDialog from \"./TaskDetailsDialog\";\nimport { useRelease } from \"@/hooks/useReleases\";\n\nconst nodeTypes = {\n  task: ({ data }: any) => (\n    <TaskCard\n      id={data.id}\n      title={data.title}\n      status={data.status}\n      owner={data.owner}\n      required={data.required}\n      priority={data.priority}\n      evidenceCount={data.evidenceCount}\n      onClick={data.onClick}\n    />\n  ),\n};\n\ninterface TaskFlowCanvasProps {\n  releaseId: string;\n  envId: \"staging\" | \"uat\" | \"prod\";\n  environmentName: string;\n}\n\nexport default function TaskFlowCanvas({ releaseId, envId, environmentName }: TaskFlowCanvasProps) {\n  const [selectedTask, setSelectedTask] = useState<{ id: string; title: string } | null>(null);\n  const { data: release, isLoading } = useRelease(releaseId);\n  \n  const tasks = useMemo(() => {\n    if (!release?.stages) return [];\n    \n    const stage = release.stages.find((s: any) => s.env === envId);\n    if (!stage?.tasks) return [];\n    \n    return stage.tasks.map((task: any) => ({\n      id: task.id,\n      title: task.title,\n      status: task.status as \"todo\" | \"doing\" | \"done\" | \"na\",\n      owner: task.owner,\n      required: task.required,\n      priority: undefined as \"P1\" | \"P2\" | \"P3\" | undefined, // Priority not in schema yet\n      evidenceCount: task.evidenceUrl ? 1 : 0,\n    }));\n  }, [release, envId]);\n\n  const initialNodes: Node[] = useMemo(() => {\n    if (tasks.length === 0) return [];\n    \n    const nodeSpacing = 360;\n    const startX = 150;\n    const centerY = 250;\n\n    return tasks.map((task, index) => ({\n      id: task.id,\n      type: \"task\",\n      position: { x: startX + (index * nodeSpacing), y: centerY },\n      data: {\n        ...task,\n        onClick: () => setSelectedTask({ id: task.id, title: task.title }),\n      },\n    }));\n  }, [tasks]);\n\n  const initialEdges: Edge[] = useMemo(() => {\n    return tasks.slice(0, -1).map((task, index) => {\n      const nextTask = tasks[index + 1];\n      const isCompleted = task.status === \"done\";\n      \n      return {\n        id: `${task.id}-${nextTask.id}`,\n        source: task.id,\n        target: nextTask.id,\n        type: \"straight\",\n        animated: isCompleted,\n        markerEnd: {\n          type: MarkerType.ArrowClosed,\n          color: isCompleted ? \"hsl(var(--primary))\" : \"hsl(var(--muted-foreground))\",\n        },\n        style: { \n          stroke: isCompleted ? \"hsl(var(--primary))\" : \"hsl(var(--muted-foreground))\", \n          strokeWidth: 3,\n        },\n      };\n    });\n  }, [tasks]);\n\n  const [nodes, , onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n\n  const onConnect = useCallback(\n    (params: Connection) => {\n      const newEdge = {\n        ...params,\n        type: \"straight\",\n        animated: false,\n        markerEnd: {\n          type: MarkerType.ArrowClosed,\n          color: \"hsl(var(--primary))\",\n        },\n        style: { \n          stroke: \"hsl(var(--primary))\", \n          strokeWidth: 3,\n        },\n      };\n      setEdges((eds) => addEdge(newEdge, eds));\n    },\n    [setEdges]\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full h-full bg-background flex items-center justify-center\" data-testid=\"task-flow-canvas\">\n        <div className=\"text-muted-foreground\">Loading tasks...</div>\n      </div>\n    );\n  }\n\n  if (tasks.length === 0) {\n    return (\n      <div className=\"w-full h-full bg-background flex items-center justify-center\" data-testid=\"task-flow-canvas\">\n        <div className=\"text-muted-foreground\">No tasks found for this environment</div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"w-full h-full bg-background\" data-testid=\"task-flow-canvas\">\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          nodeTypes={nodeTypes}\n          connectionMode={ConnectionMode.Loose}\n          fitView\n          minZoom={0.3}\n          maxZoom={1.2}\n          defaultViewport={{ x: 0, y: 0, zoom: 0.8 }}\n          proOptions={{ hideAttribution: true }}\n        >\n          <Background />\n          <Controls />\n        </ReactFlow>\n      </div>\n\n      {selectedTask && (\n        <TaskDetailsDialog\n          open={!!selectedTask}\n          onOpenChange={(open) => !open && setSelectedTask(null)}\n          taskTitle={selectedTask.title}\n          taskId={selectedTask.id}\n        />\n      )}\n    </>\n  );\n}\n","size_bytes":4797},"replit.md":{"content":"# DockVoyage - Multi-Tenant Release Management Platform\n\n## Overview\n\nDockVoyage is a production-ready multi-tenant release management platform with nautical theming and anchor branding. The application provides workspace/team-based organization, user authentication, release tracking with custom environments, and complete RBAC (Role-Based Access Control). Built for both individual users and organizations with secure data isolation.\n\n**Domain**: dockvoyage.com  \n**Tagline**: \"See your releases clearly\"  \n**Branding**: Anchor icon with nautical/maritime theme\n\n## User Preferences\n\n- Preferred communication style: Simple, everyday language\n- Design preference: Nautical theme with anchor icon, no emojis in UI (use lucide-react icons)\n- Architecture: Multi-tenant with workspaces → teams → releases → environments → stages\n\n## Recent Changes (November 8, 2025)\n\n### Email Invitation System ✅\n- **Workspace type selection**: Signup flow now asks users to select individual vs organization workspace\n- **Resend integration**: Email service configured for transactional emails with nautical branding\n- **Invitation APIs**: Secure backend endpoints for creating, listing, and accepting invitations\n  - Admin-only access: Only workspace admins can send/view invitations\n  - Input validation: All invitation data validated with Zod schemas\n  - Token sanitization: Sensitive tokens removed from API responses\n- **Team Management UI**: New page for workspace admins to invite team members via email\n- **Nautical-themed emails**: HTML email template with DockVoyage anchor branding\n- **Public invitation flow**: Accept page allows invited users to join workspaces\n- **URL generation**: Invitation links use request host for proper email delivery\n\n### Session Handling Fix ✅\n- **Fixed session deserialization errors** that prevented app from loading\n- Updated Passport deserializeUser to gracefully handle missing users (returns null instead of throwing)\n- Cleared invalid sessions from database after migration\n- App now loads cleanly without session-related errors\n\n### Multi-Tenant Architecture Migration ✅\n- **Complete database redesign** with workspaces, teams, members, environments, and flows\n- **Auto-provisioning**: New users automatically get workspace + team + 3 default environments\n- **RBAC implementation**: Workspace admins, team admins, and member roles\n- **Custom environments**: Teams can create their own environments (not hardcoded to staging/UAT/prod)\n- **Security hardening**: ALL endpoints now enforce authentication + team ownership validation\n- **Data isolation**: Users can only access releases within their workspace's teams\n\n## Recent Changes (November 7, 2025)\n\n### Authentication System\n- Implemented complete user authentication with signup/login pages\n- Added Passport.js with LocalStrategy for username/password auth\n- Configured session management with PostgreSQL session store\n- Protected all routes requiring authentication\n- Added SESSION_SECRET validation for secure session management\n\n### Release Filtering\n- Added status filtering (ongoing, finished, failed) with backend support\n- Backend enriches release data with stages and blockers for accurate filtering\n- Filter buttons in sidebar allow users to view voyages by status\n\n### Shipyard Branding\n- Applied complete nautical theme with ocean-inspired colors:\n  - Navy blue (#1e3a5f) for primary elements\n  - Ocean blue (#2563eb) for accents\n  - Ship and anchor icons throughout\n- Updated all UI text to use nautical terminology:\n  - Releases → Voyages\n  - Environments → Cargo Holds\n  - Agent/Assistant → Dockmaster\n- Added anchor icon branding to authentication page\n- Removed all emojis in favor of lucide-react icons\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Routing**\n- React 18 with TypeScript for type-safe component development\n- Wouter for lightweight client-side routing with protected routes\n- Vite as the build tool and development server with hot module replacement\n\n**State Management & Data Fetching**\n- TanStack Query (React Query) for server state management, caching, and synchronization\n- Custom hooks pattern (`useReleases`, `useAuth`) to encapsulate data fetching logic\n- React Context API for global authentication state\n\n**UI Component System**\n- shadcn/ui component library built on Radix UI primitives\n- Shipyard nautical design system with ocean-inspired color palette\n- Tailwind CSS for utility-first styling with custom design tokens\n- Custom CSS variables for theme switching (light/dark mode)\n- Typography system using Inter (UI) and JetBrains Mono (code/IDs) fonts\n\n**Authentication Flow**\n- Split-screen login/signup page with anchor branding\n- Protected route wrapper requiring authentication\n- Automatic redirect to auth page for unauthenticated users\n- Session persistence across page refreshes\n\n**Interactive Visualization** (Planned)\n- React Flow library for node-based diagram editing with drag-and-drop\n- Custom node types for environments and tasks\n- Three-column layout: release list sidebar (280px), flow canvas (flex), and detail panel (340px slide-in)\n\n**Form Management**\n- React Hook Form with Zod schema validation\n- @hookform/resolvers for schema integration\n- Validated forms for release creation and authentication\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js on Node.js (v20+) for the REST API\n- TypeScript for type safety across client and server\n- Session-based authentication using Passport.js with local strategy\n\n**API Design**\n- RESTful endpoints organized by resource (`/api/releases`, `/api/stages`, `/api/tasks`, `/api/blockers`)\n- Authentication endpoints (`/api/register`, `/api/login`, `/api/logout`, `/api/user`)\n- CRUD operations for releases, stages, tasks, and blockers\n- Release filtering with enriched data (stages + blockers) for status derivation\n- Health check endpoint for monitoring database connectivity\n- Structured error handling with appropriate HTTP status codes\n\n**Authentication & Authorization**\n- Passport.js with LocalStrategy for username/password authentication\n- Session management with secure cookies\n- Password hashing using bcrypt (scrypt algorithm with salt)\n- Protected API routes requiring authentication\n- SESSION_SECRET environment variable validation before auth initialization\n\n**Database Layer**\n- Drizzle ORM for type-safe database operations\n- Schema-first approach with TypeScript types generated from Drizzle schemas\n- PostgreSQL as the relational database (via Neon serverless)\n- Connection pooling through @neondatabase/serverless\n\n### Data Storage\n\n**Database Schema**\n\n**Multi-Tenant Core:**\n- **workspaces**: Top-level tenant containers (id, name, type: individual/organization, slug)\n- **workspaceMembers**: User→workspace membership with roles (admin/member)\n- **teams**: Groups within workspaces that own releases (id, name, description)\n- **teamMembers**: User→team membership with roles (admin/member)\n- **invitations**: Email invites for team collaboration (pending implementation)\n\n**Release Management:**\n- **releases**: Voyages within teams (id, teamId, name, version, changeWindow)\n- **environments**: Custom deployment targets per team (id, teamId, name, sortOrder)\n- **stages**: Release progress through environments (releaseId, environmentId, status, approver)\n- **flows**: Task groupings within environments (environmentId, name, sortOrder)\n- **tasks**: Actionable items within stages (stageId, flowId, title, owner, status, evidence)\n- **blockers**: Issues preventing stage progression (stageId, severity: P1/P2/P3, active)\n- **activityLog**: Audit trail of all changes (workspaceId, releaseId, stageId, actor, action)\n\n**Enums for Type Safety**\n- Workspace types: individual, organization\n- Workspace member roles: admin, member\n- Workspace member status: active, inactive\n- Team member roles: admin, member\n- Stage statuses: not_started, in_progress, blocked, done\n- Task statuses: todo, doing, done, na\n- Blocker severity: P1, P2, P3\n- Invitation status: pending, accepted, expired\n\n**Session Storage**\n- PostgreSQL-backed session store using connect-pg-simple\n- Sessions persist across server restarts\n- Secure session configuration with SESSION_SECRET\n\n### External Dependencies\n\n**Database Services**\n- **Neon Database**: Serverless PostgreSQL hosting with websocket support\n- Connection via DATABASE_URL environment variable\n- Drizzle Kit for schema migrations and database management\n\n**UI Component Libraries**\n- **Radix UI**: Unstyled, accessible component primitives (dialogs, dropdowns, tooltips, etc.)\n- **React Flow**: Interactive node-based diagram library for flow visualization (planned)\n- **Lucide React**: Icon library for nautical and UI icons\n- **React Icons**: Company logos and additional icon sets\n\n**Development Tools**\n- **Vite**: Frontend build tool with HMR and optimized production builds\n- **tsx**: TypeScript execution for development server and scripts\n- **esbuild**: Fast JavaScript bundler for production server build\n- **Drizzle Kit**: Database schema management and migrations\n\n**Authentication**\n- **Passport.js**: Authentication middleware with strategy pattern\n- **express-session**: Session management middleware\n- **bcrypt**: Secure password hashing\n- Session secret required via SESSION_SECRET environment variable (validated at startup)\n\n**Utility Libraries**\n- **date-fns**: Date formatting and manipulation\n- **zod**: Runtime schema validation\n- **clsx/tailwind-merge**: Conditional CSS class merging\n\n**Font Hosting**\n- Google Fonts: Inter and JetBrains Mono via CDN link in HTML\n\n**Planned Integrations** (not yet implemented)\n- Slack/Teams webhooks for release notifications\n- GitHub/GitLab API for CI/CD status linking\n- S3-compatible storage for evidence attachments\n- Real-time collaboration via WebSockets\n\n## Key Features\n\n### Implemented\n✅ User authentication (signup/login with session management)\n✅ Protected routes requiring login\n✅ Release creation and listing\n✅ Release filtering by status (ongoing/finished/failed)\n✅ Automatic environment creation (staging, UAT, production)\n✅ Shipyard nautical branding with anchor icon\n✅ Ocean-inspired color palette\n✅ Responsive UI with shadcn components\n\n### Planned\n- Interactive flow diagram for release visualization\n- Task management within stages\n- Blocker tracking and resolution\n- Activity log and audit trail\n- Real-time collaboration\n- Chatbot assistant for release help\n- Email notifications with nautical branding\n- Evidence attachment storage\n\n## Environment Variables\n\nRequired secrets (configured in Replit):\n- `DATABASE_URL`: PostgreSQL connection string\n- `SESSION_SECRET`: Secret for session encryption (validated at startup)\n- `PGDATABASE`, `PGHOST`, `PGPASSWORD`, `PGPORT`, `PGUSER`: Database credentials\n\n## Running the Application\n\nThe workflow \"Start application\" runs `npm run dev` which:\n1. Starts Express server for backend API (port 5000)\n2. Starts Vite development server for frontend\n3. Serves both on the same port with hot module replacement\n\nAfter authentication, users can:\n- Create new releases (voyages)\n- View all releases in the sidebar\n- Filter releases by status\n- Experience nautical-themed interface with anchor branding\n","size_bytes":11247},"client/src/hooks/useTasks.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport interface Task {\n  id: string;\n  stageId: string;\n  title: string;\n  details?: string;\n  owner?: string;\n  required: boolean;\n  status: \"todo\" | \"doing\" | \"done\" | \"na\";\n  evidenceUrl?: string;\n  updatedAt: string;\n}\n\nexport interface CreateTaskData {\n  title: string;\n  details?: string;\n  owner?: string;\n  required?: boolean;\n  status?: \"todo\" | \"doing\" | \"done\" | \"na\";\n  evidenceUrl?: string;\n}\n\nexport function useTasks(stageId: string | null) {\n  return useQuery<Task[]>({\n    queryKey: stageId ? [`/api/stages/${stageId}`] : [\"skip\"],\n    enabled: !!stageId,\n    select: (data: any) => data?.tasks || [],\n  });\n}\n\nexport function useCreateTask() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ stageId, data }: { stageId: string; data: CreateTaskData }) => {\n      const res = await apiRequest(\"POST\", `/api/stages/${stageId}/tasks`, data);\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/stages/${variables.stageId}`] });\n    },\n  });\n}\n\nexport function useUpdateTask() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<CreateTaskData> }) => {\n      const res = await apiRequest(\"PATCH\", `/api/tasks/${id}`, data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/stages\"] });\n    },\n  });\n}\n\n","size_bytes":1600},"client/src/components/examples/TaskFlowCanvas.tsx":{"content":"import TaskFlowCanvas from \"../TaskFlowCanvas\";\n\nexport default function TaskFlowCanvasExample() {\n  return (\n    <div className=\"h-screen w-full\">\n      <TaskFlowCanvas environmentName=\"Staging Environment\" />\n    </div>\n  );\n}\n","size_bytes":229},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\n// Get API base URL from environment or use default\nconst getApiBaseUrl = () => {\n  // Allow override via environment variable (VITE_API_BASE_URL)\n  if (import.meta.env.VITE_API_BASE_URL) {\n    return import.meta.env.VITE_API_BASE_URL;\n  }\n  \n  // In production, use api.dockvoyage.com\n  // In development, use localhost (or current origin)\n  if (import.meta.env.PROD) {\n    return \"https://api.dockvoyage.com\";\n  }\n  \n  // For local development, use the current origin (localhost)\n  return window.location.origin;\n};\n\nexport const API_BASE_URL = getApiBaseUrl();\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  // Ensure URL starts with /, then prepend API base URL\n  const fullUrl = url.startsWith(\"/\") \n    ? `${API_BASE_URL}${url}`\n    : `${API_BASE_URL}/${url}`;\n  \n  const res = await fetch(fullUrl, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    // queryKey is an array like [\"/api/teams\"] or [\"/api/releases\", { teamId: \"...\" }]\n    const path = Array.isArray(queryKey) \n      ? queryKey[0] as string\n      : queryKey as string;\n    \n    const fullUrl = path.startsWith(\"/\")\n      ? `${API_BASE_URL}${path}`\n      : `${API_BASE_URL}/${path}`;\n    \n    // Handle query parameters if present\n    let url = fullUrl;\n    if (Array.isArray(queryKey) && queryKey.length > 1 && typeof queryKey[1] === \"object\") {\n      const params = new URLSearchParams();\n      Object.entries(queryKey[1] as Record<string, string>).forEach(([key, value]) => {\n        if (value) params.append(key, value);\n      });\n      if (params.toString()) {\n        url = `${fullUrl}?${params.toString()}`;\n      }\n    }\n    \n    const res = await fetch(url, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":2840},"client/src/components/examples/ReleaseListPanel.tsx":{"content":"import ReleaseListPanel from \"../ReleaseListPanel\";\n\nexport default function ReleaseListPanelExample() {\n  return (\n    <div className=\"h-screen\">\n      <ReleaseListPanel\n        onReleaseClick={(id) => console.log(\"Release clicked:\", id)}\n      />\n    </div>\n  );\n}\n","size_bytes":267},"client/src/components/examples/ThemeToggle.tsx":{"content":"import ThemeToggle from \"../ThemeToggle\";\n\nexport default function ThemeToggleExample() {\n  return <ThemeToggle />;\n}\n","size_bytes":118},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/hooks/useStages.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport interface Stage {\n  id: string;\n  releaseId: string;\n  env: \"staging\" | \"uat\" | \"prod\";\n  status: \"not_started\" | \"in_progress\" | \"blocked\" | \"done\";\n  approver?: string;\n  startedAt?: string;\n  endedAt?: string;\n  lastUpdate: string;\n  tasks?: any[];\n  blockers?: any[];\n}\n\nexport function useStage(id: string | null) {\n  return useQuery<Stage>({\n    queryKey: id ? [`/api/stages/${id}`] : [\"skip\"],\n    enabled: !!id,\n  });\n}\n\nexport function useUpdateStage() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<Stage> }) => {\n      const res = await apiRequest(\"PATCH\", `/api/stages/${id}`, data);\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/stages/${variables.id}`] });\n    },\n  });\n}\n\nexport function useApproveStage() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, approver, note }: { id: string; approver: string; note?: string }) => {\n      const res = await apiRequest(\"POST\", `/api/stages/${id}/approve`, { approver, note });\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [`/api/stages/${variables.id}`] });\n    },\n  });\n}\n\n","size_bytes":1447},"client/src/components/examples/TaskDetailsDialog.tsx":{"content":"import { useState } from \"react\";\nimport TaskDetailsDialog from \"../TaskDetailsDialog\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function TaskDetailsDialogExample() {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <div>\n      <Button onClick={() => setOpen(true)}>Open Task Details</Button>\n      <TaskDetailsDialog\n        open={open}\n        onOpenChange={setOpen}\n        taskTitle=\"CI green for main branch\"\n        taskId=\"task-1\"\n      />\n    </div>\n  );\n}\n","size_bytes":499},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/TaskDetailsDialog.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { CheckCircle2, Clock, Link as LinkIcon } from \"lucide-react\";\n\ninterface ChecklistItem {\n  id: string;\n  text: string;\n  completed: boolean;\n  owner?: string;\n}\n\ninterface TaskDetailsDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  taskTitle: string;\n  taskId: string;\n}\n\nexport default function TaskDetailsDialog({\n  open,\n  onOpenChange,\n  taskTitle,\n  taskId,\n}: TaskDetailsDialogProps) {\n  const [checklist, setChecklist] = useState<ChecklistItem[]>([\n    { id: \"1\", text: \"Code review completed\", completed: true, owner: \"John Doe\" },\n    { id: \"2\", text: \"Tests passing\", completed: true, owner: \"Jane Smith\" },\n    { id: \"3\", text: \"Documentation updated\", completed: false, owner: \"Bob Johnson\" },\n  ]);\n\n  const [status, setStatus] = useState(\"doing\");\n  const [evidenceUrl, setEvidenceUrl] = useState(\"\");\n\n  const toggleChecklistItem = (id: string) => {\n    setChecklist((prev) =>\n      prev.map((item) =>\n        item.id === id ? { ...item, completed: !item.completed } : item\n      )\n    );\n    console.log(`Toggled checklist item ${id}`);\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(\" \")\n      .map((n) => n[0])\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\" data-testid={`dialog-task-details-${taskId}`}>\n        <DialogHeader>\n          <DialogTitle className=\"text-lg\" data-testid={`text-dialog-title-${taskId}`}>{taskTitle}</DialogTitle>\n        </DialogHeader>\n\n        <Tabs defaultValue=\"checklist\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3\">\n            <TabsTrigger value=\"checklist\" data-testid=\"tab-checklist\">Checklist</TabsTrigger>\n            <TabsTrigger value=\"details\" data-testid=\"tab-details\">Details</TabsTrigger>\n            <TabsTrigger value=\"activity\" data-testid=\"tab-activity\">Activity</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"checklist\" className=\"space-y-4 mt-4\">\n            <div className=\"space-y-3\">\n              {checklist.map((item) => (\n                <div\n                  key={item.id}\n                  className=\"flex items-center justify-between p-3 rounded-md border hover-elevate\"\n                  data-testid={`checklist-item-${item.id}`}\n                >\n                  <div className=\"flex items-center gap-3 flex-1\">\n                    <Checkbox\n                      checked={item.completed}\n                      onCheckedChange={() => toggleChecklistItem(item.id)}\n                      data-testid={`checkbox-${item.id}`}\n                    />\n                    <span\n                      className={item.completed ? \"line-through text-muted-foreground\" : \"\"}\n                    >\n                      {item.text}\n                    </span>\n                  </div>\n                  {item.owner && (\n                    <div className=\"flex items-center gap-2\">\n                      <Avatar className=\"h-6 w-6\">\n                        <AvatarFallback className=\"text-xs\">\n                          {getInitials(item.owner)}\n                        </AvatarFallback>\n                      </Avatar>\n                      <span className=\"text-xs text-muted-foreground\">{item.owner}</span>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"details\" className=\"space-y-4 mt-4\">\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label>Status</Label>\n                <Select value={status} onValueChange={setStatus}>\n                  <SelectTrigger data-testid=\"select-status\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"todo\">To Do</SelectItem>\n                    <SelectItem value=\"doing\">In Progress</SelectItem>\n                    <SelectItem value=\"done\">Done</SelectItem>\n                    <SelectItem value=\"na\">N/A</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  placeholder=\"Add task description...\"\n                  className=\"min-h-24\"\n                  data-testid=\"textarea-description\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"evidence\">Evidence URL</Label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    id=\"evidence\"\n                    placeholder=\"https://...\"\n                    value={evidenceUrl}\n                    onChange={(e) => setEvidenceUrl(e.target.value)}\n                    data-testid=\"input-evidence-url\"\n                  />\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    onClick={() => console.log(\"Add evidence:\", evidenceUrl)}\n                    data-testid=\"button-add-evidence\"\n                  >\n                    <LinkIcon className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"activity\" className=\"space-y-4 mt-4\">\n            <div className=\"space-y-3\">\n              <div className=\"flex gap-3 text-sm\" data-testid=\"activity-item-1\">\n                <div className=\"flex-shrink-0 mt-1\">\n                  <CheckCircle2 className=\"h-4 w-4 text-emerald-500\" />\n                </div>\n                <div className=\"flex-1\">\n                  <p className=\"font-medium\">Status changed to \"In Progress\"</p>\n                  <p className=\"text-xs text-muted-foreground\">John Doe • 2 hours ago</p>\n                </div>\n              </div>\n              <div className=\"flex gap-3 text-sm\" data-testid=\"activity-item-2\">\n                <div className=\"flex-shrink-0 mt-1\">\n                  <Clock className=\"h-4 w-4 text-blue-500\" />\n                </div>\n                <div className=\"flex-1\">\n                  <p className=\"font-medium\">Task created</p>\n                  <p className=\"text-xs text-muted-foreground\">Jane Smith • 1 day ago</p>\n                </div>\n              </div>\n            </div>\n          </TabsContent>\n        </Tabs>\n\n        <div className=\"flex justify-end gap-2 pt-4 border-t\">\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} data-testid=\"button-close\">\n            Close\n          </Button>\n          <Button onClick={() => {\n            console.log(\"Saved task changes\");\n            onOpenChange(false);\n          }} data-testid=\"button-save\">\n            Save Changes\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7645},"client/src/components/EnvironmentFlowCanvas.tsx":{"content":"import { useCallback, useMemo, useState, useEffect } from \"react\";\nimport ReactFlow, {\n  Background,\n  Controls,\n  Node,\n  Edge,\n  MarkerType,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  Connection,\n  ConnectionMode,\n  NodeChange,\n  EdgeChange,\n  Panel,\n} from \"reactflow\";\nimport \"reactflow/dist/style.css\";\nimport EnvironmentNode from \"./EnvironmentNode\";\nimport { useRelease } from \"@/hooks/useReleases\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { Button } from \"./ui/button\";\nimport { Plus, Save } from \"lucide-react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"./ui/dialog\";\nimport { Input } from \"./ui/input\";\nimport { Label } from \"./ui/label\";\n\nconst nodeTypes = {\n  environment: ({ data }: any) => (\n    <EnvironmentNode\n      id={data.id}\n      name={data.name}\n      env={data.env}\n      status={data.status}\n      tasksCompleted={data.tasksCompleted}\n      tasksTotal={data.tasksTotal}\n      lastUpdate={data.lastUpdate}\n      onClick={data.onClick}\n    />\n  ),\n};\n\ninterface EnvironmentFlowCanvasProps {\n  releaseId: string | null;\n  onEnvironmentClick?: (stageId: string) => void;\n}\n\nexport default function EnvironmentFlowCanvas({ releaseId, onEnvironmentClick }: EnvironmentFlowCanvasProps) {\n  const { data: release, isLoading } = useRelease(releaseId);\n  const { toast } = useToast();\n  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n  const [newEnvName, setNewEnvName] = useState(\"\");\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n\n  // Fetch saved diagram layout\n  const { data: diagram } = useQuery<{ layout?: { nodes?: any[]; edges?: any[] } }>({\n    queryKey: ['/api/releases', releaseId, 'diagram'],\n    enabled: !!releaseId,\n  });\n\n  const environments = useMemo(() => {\n    if (!release?.stages) return [];\n    \n    return release.stages.map((stage: any) => {\n      const environment = stage.environment || { id: stage.environmentId, name: \"Unknown\" };\n      const tasks = stage.tasks || [];\n      const tasksCompleted = tasks.filter((t: any) => t.status === \"done\").length;\n      const tasksTotal = tasks.length;\n      \n      return {\n        id: stage.id,\n        environmentId: stage.environmentId,\n        name: environment.name,\n        tasksCompleted,\n        tasksTotal,\n        lastUpdate: stage.lastUpdate \n          ? formatDistanceToNow(new Date(stage.lastUpdate), { addSuffix: true })\n          : \"Never\",\n        status: stage.status || \"not_started\",\n        blockers: stage.blockers || [],\n      };\n    }).sort((a, b) => a.name.localeCompare(b.name));\n  }, [release]);\n\n  const initialNodes: Node[] = useMemo(() => {\n    if (environments.length === 0) return [];\n    \n    // Check if we have saved layout\n    const savedLayout = diagram?.layout;\n    const savedNodes = savedLayout?.nodes || [];\n    \n    const nodeSpacing = 320;\n    const startX = 150;\n    const centerY = 250;\n\n    return environments.map((env, index) => {\n      // Try to find saved position for this node\n      const savedNode = savedNodes.find((n: any) => n.id === env.id);\n      const position = savedNode?.position || { \n        x: startX + (index * nodeSpacing), \n        y: centerY \n      };\n\n      return {\n        id: env.id,\n        type: \"environment\",\n        position,\n        data: {\n          id: env.id,\n          environmentId: env.environmentId,\n          name: env.name,\n          status: env.status,\n          tasksCompleted: env.tasksCompleted,\n          tasksTotal: env.tasksTotal,\n          lastUpdate: env.lastUpdate,\n          blockers: env.blockers,\n          onClick: () => onEnvironmentClick?.(env.id),\n        },\n      };\n    });\n  }, [environments, diagram, onEnvironmentClick]);\n\n  const initialEdges: Edge[] = useMemo(() => {\n    // Check if we have saved edges\n    const savedLayout = diagram?.layout;\n    if (savedLayout?.edges && savedLayout.edges.length > 0) {\n      return savedLayout.edges.map((edge: any) => ({\n        ...edge,\n        markerEnd: {\n          type: MarkerType.ArrowClosed,\n          color: edge.style?.stroke || \"hsl(var(--primary))\",\n        },\n      }));\n    }\n\n    // Default: create linear flow\n    return environments.slice(0, -1).map((env, index) => {\n      const nextEnv = environments[index + 1];\n      const isCompleted = env.tasksCompleted === env.tasksTotal;\n      \n      return {\n        id: `${env.id}-${nextEnv.id}`,\n        source: env.id,\n        target: nextEnv.id,\n        type: \"straight\",\n        animated: env.status === \"done\",\n        markerEnd: {\n          type: MarkerType.ArrowClosed,\n          color: env.status === \"done\" ? \"hsl(var(--primary))\" : \"hsl(var(--muted-foreground))\",\n        },\n        style: { \n          stroke: env.status === \"done\" ? \"hsl(var(--primary))\" : \"hsl(var(--muted-foreground))\", \n          strokeWidth: 3,\n        },\n      };\n    });\n  }, [environments, diagram]);\n\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n\n  // Update nodes when initial nodes change\n  useEffect(() => {\n    setNodes(initialNodes);\n  }, [initialNodes, setNodes]);\n\n  // Update edges when initial edges change\n  useEffect(() => {\n    setEdges(initialEdges);\n  }, [initialEdges, setEdges]);\n\n  // Handle node position changes\n  const handleNodesChange = useCallback((changes: NodeChange[]) => {\n    onNodesChange(changes);\n    // Check if any position changed\n    const hasPositionChange = changes.some(\n      (change) => change.type === 'position' && change.dragging === false\n    );\n    if (hasPositionChange) {\n      setHasUnsavedChanges(true);\n    }\n  }, [onNodesChange]);\n\n  // Handle edge changes\n  const handleEdgesChange = useCallback((changes: EdgeChange[]) => {\n    onEdgesChange(changes);\n    const hasEdgeChange = changes.some((change) => change.type === 'remove');\n    if (hasEdgeChange) {\n      setHasUnsavedChanges(true);\n    }\n  }, [onEdgesChange]);\n\n  const onConnect = useCallback(\n    (params: Connection) => {\n      const newEdge = {\n        ...params,\n        type: \"straight\",\n        animated: false,\n        markerEnd: {\n          type: MarkerType.ArrowClosed,\n          color: \"hsl(var(--primary))\",\n        },\n        style: { \n          stroke: \"hsl(var(--primary))\", \n          strokeWidth: 3,\n        },\n      };\n      setEdges((eds) => addEdge(newEdge, eds));\n      setHasUnsavedChanges(true);\n    },\n    [setEdges]\n  );\n\n  // Save layout mutation\n  const saveDiagram = useMutation({\n    mutationFn: async () => {\n      if (!releaseId) throw new Error(\"No release selected\");\n      \n      const layout = {\n        nodes: nodes.map(node => ({\n          id: node.id,\n          position: node.position,\n          type: node.type,\n        })),\n        edges: edges.map(edge => ({\n          id: edge.id,\n          source: edge.source,\n          target: edge.target,\n          type: edge.type,\n          animated: edge.animated,\n          style: edge.style,\n        })),\n      };\n\n      const response = await apiRequest('PUT', `/api/releases/${releaseId}/diagram`, { layout });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/releases', releaseId, 'diagram'] });\n      setHasUnsavedChanges(false);\n      toast({\n        title: \"Layout saved\",\n        description: \"Your canvas layout has been saved successfully.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to save layout\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Add environment mutation\n  const addEnvironment = useMutation({\n    mutationFn: async (name: string) => {\n      if (!releaseId) throw new Error(\"No release selected\");\n      if (!release?.team?.id) throw new Error(\"No team associated with release\");\n\n      // First create the environment\n      const envResponse = await apiRequest('POST', `/api/teams/${release.team.id}/environments`, { \n        name,\n        sortOrder: String(environments.length),\n      });\n      const env = await envResponse.json();\n\n      // Then create a stage for this environment in the current release\n      const stageResponse = await apiRequest('POST', `/api/releases/${releaseId}/stages`, {\n        environmentId: env.id,\n        status: 'not_started',\n      });\n      const stage = await stageResponse.json();\n\n      return stage;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/releases', releaseId] });\n      setIsAddDialogOpen(false);\n      setNewEnvName(\"\");\n      toast({\n        title: \"Environment added\",\n        description: \"New environment has been added to the canvas.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to add environment\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAddEnvironment = () => {\n    if (newEnvName.trim()) {\n      addEnvironment.mutate(newEnvName.trim());\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full h-full bg-background flex items-center justify-center\" data-testid=\"environment-flow-canvas\">\n        <div className=\"text-muted-foreground\">Loading environments...</div>\n      </div>\n    );\n  }\n\n  if (!releaseId) {\n    return (\n      <div className=\"w-full h-full bg-background flex items-center justify-center\" data-testid=\"environment-flow-canvas\">\n        <div className=\"text-muted-foreground\">Select a voyage to view the flow</div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"w-full h-full bg-background\" data-testid=\"environment-flow-canvas\">\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={handleNodesChange}\n          onEdgesChange={handleEdgesChange}\n          onConnect={onConnect}\n          nodeTypes={nodeTypes}\n          connectionMode={ConnectionMode.Loose}\n          nodesDraggable={true}\n          nodesConnectable={true}\n          elementsSelectable={true}\n          fitView\n          minZoom={0.3}\n          maxZoom={2}\n          defaultViewport={{ x: 0, y: 0, zoom: 1 }}\n          proOptions={{ hideAttribution: true }}\n        >\n          <Background />\n          <Controls />\n          <Panel position=\"top-right\" className=\"flex gap-2\">\n            <Button\n              size=\"sm\"\n              onClick={() => setIsAddDialogOpen(true)}\n              data-testid=\"button-add-environment\"\n            >\n              <Plus className=\"h-4 w-4 mr-1\" />\n              Add Environment\n            </Button>\n            {hasUnsavedChanges && (\n              <Button\n                size=\"sm\"\n                variant=\"default\"\n                onClick={() => saveDiagram.mutate()}\n                disabled={saveDiagram.isPending}\n                data-testid=\"button-save-layout\"\n              >\n                <Save className=\"h-4 w-4 mr-1\" />\n                {saveDiagram.isPending ? \"Saving...\" : \"Save Layout\"}\n              </Button>\n            )}\n          </Panel>\n        </ReactFlow>\n      </div>\n\n      <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Add New Environment</DialogTitle>\n            <DialogDescription>\n              Create a new environment stage for this voyage. You can position it on the canvas and connect it to other environments.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"env-name\">Environment Name</Label>\n              <Input\n                id=\"env-name\"\n                placeholder=\"e.g., Staging, UAT, Production\"\n                value={newEnvName}\n                onChange={(e) => setNewEnvName(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && newEnvName.trim()) {\n                    handleAddEnvironment();\n                  }\n                }}\n                data-testid=\"input-environment-name\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsAddDialogOpen(false);\n                setNewEnvName(\"\");\n              }}\n              data-testid=\"button-cancel-add-environment\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleAddEnvironment}\n              disabled={!newEnvName.trim() || addEnvironment.isPending}\n              data-testid=\"button-confirm-add-environment\"\n            >\n              {addEnvironment.isPending ? \"Adding...\" : \"Add Environment\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":13031},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ThemeProvider } from \"@/lib/theme-provider\";\nimport { AuthProvider } from \"@/hooks/use-auth\";\nimport { ProtectedRoute } from \"@/lib/protected-route\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Workspace from \"@/pages/Workspace\";\nimport EnvironmentView from \"@/pages/EnvironmentView\";\nimport AuthPage from \"@/pages/AuthPage\";\nimport TeamManagement from \"@/pages/TeamManagement\";\nimport InviteAccept from \"@/pages/InviteAccept\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <ProtectedRoute path=\"/workspace\" component={Workspace} />\n      <ProtectedRoute path=\"/project/:projectId\" component={Dashboard} />\n      <ProtectedRoute path=\"/\" component={Workspace} />\n      <ProtectedRoute path=\"/environment/:envId\" component={EnvironmentView} />\n      <ProtectedRoute path=\"/team\" component={TeamManagement} />\n      <Route path=\"/invite/:token\" component={InviteAccept} />\n      <Route path=\"/auth\" component={AuthPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <ThemeProvider>\n          <TooltipProvider>\n            <Toaster />\n            <Router />\n          </TooltipProvider>\n        </ThemeProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1628},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/pages/EnvironmentView.tsx":{"content":"import { useRoute, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ArrowLeft } from \"lucide-react\";\nimport TaskFlowCanvas from \"@/components/TaskFlowCanvas\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport { useRelease } from \"@/hooks/useReleases\";\n\nconst envConfig = {\n  staging: { label: \"Staging\", className: \"bg-blue-500/10 text-blue-600 dark:text-blue-400\" },\n  uat: { label: \"UAT\", className: \"bg-amber-500/10 text-amber-600 dark:text-amber-400\" },\n  prod: { label: \"Production\", className: \"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400\" },\n};\n\nexport default function EnvironmentView() {\n  const [, params] = useRoute(\"/environment/:envId\");\n  const [, setLocation] = useLocation();\n  const envId = params?.envId as \"staging\" | \"uat\" | \"prod\";\n  const envInfo = envId ? envConfig[envId] : null;\n  \n  // Get releaseId from URL search params\n  const searchParams = new URLSearchParams(window.location.search);\n  const releaseId = searchParams.get(\"releaseId\") || \"1\"; // Default for now\n  const { data: release } = useRelease(releaseId);\n\n  if (!envId || !envInfo) {\n    return (\n      <div className=\"h-screen flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Environment not found</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col\">\n      <header className=\"h-16 border-b bg-card flex items-center justify-between px-6\">\n        <div className=\"flex items-center gap-4\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/\")}\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"h-5 w-5\" />\n          </Button>\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"text-lg font-semibold\">{release?.name || \"Release\"}</h1>\n            <span className=\"text-muted-foreground\">/</span>\n            <Badge className={envInfo.className} data-testid=\"badge-env-header\">\n              {envInfo.label}\n            </Badge>\n          </div>\n        </div>\n        <ThemeToggle />\n      </header>\n\n      <div className=\"flex-1 overflow-hidden\">\n        <TaskFlowCanvas releaseId={releaseId} envId={envId} environmentName={envInfo.label} />\n      </div>\n    </div>\n  );\n}\n","size_bytes":2356},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Express } from \"express\";\nimport session from \"express-session\";\nimport { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\nimport { storage } from \"./storage\";\nimport { User as SelectUser } from \"@shared/schema\";\n\ndeclare global {\n  namespace Express {\n    interface User extends SelectUser {}\n  }\n}\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\n\nasync function comparePasswords(supplied: string, stored: string) {\n  const [hashed, salt] = stored.split(\".\");\n  const hashedBuf = Buffer.from(hashed, \"hex\");\n  const suppliedBuf = (await scryptAsync(supplied, salt, 64)) as Buffer;\n  return timingSafeEqual(hashedBuf, suppliedBuf);\n}\n\nexport function setupAuth(app: Express) {\n  if (!process.env.SESSION_SECRET) {\n    throw new Error(\"SESSION_SECRET environment variable is required for authentication\");\n  }\n\n  const sessionSettings: session.SessionOptions = {\n    secret: process.env.SESSION_SECRET,\n    resave: false,\n    saveUninitialized: false,\n    store: storage.sessionStore,\n  };\n\n  app.set(\"trust proxy\", 1);\n  app.use(session(sessionSettings));\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.use(\n    new LocalStrategy(async (username, password, done) => {\n      const user = await storage.getUserByUsername(username);\n      if (!user || !(await comparePasswords(password, user.password))) {\n        return done(null, false);\n      } else {\n        return done(null, user);\n      }\n    }),\n  );\n\n  passport.serializeUser((user, done) => done(null, user.id));\n  passport.deserializeUser(async (id: string, done) => {\n    try {\n      const user = await storage.getUser(id);\n      if (!user) {\n        // User no longer exists (e.g., after database migration) - clear the session\n        return done(null, null);\n      }\n      done(null, user);\n    } catch (error) {\n      // Handle any errors gracefully\n      done(null, null);\n    }\n  });\n\n  app.post(\"/api/register\", async (req, res, next) => {\n    try {\n      const existingUser = await storage.getUserByUsername(req.body.username);\n      if (existingUser) {\n        return res.status(400).send(\"Username already exists\");\n      }\n\n      const user = await storage.createUser({\n        username: req.body.username,\n        email: req.body.email,\n        password: await hashPassword(req.body.password),\n      });\n\n      // Auto-create workspace, team, and environments for new user\n      const workspaceType = req.body.workspaceType || \"individual\";\n      const workspaceName = workspaceType === \"organization\" && req.body.workspaceName\n        ? req.body.workspaceName\n        : `${user.username}'s Workspace`;\n\n      const workspace = await storage.createWorkspace({\n        name: workspaceName,\n        type: workspaceType,\n        slug: `${user.username}-${randomBytes(4).toString(\"hex\")}`,\n        createdBy: user.id,\n      });\n\n      // Add user as workspace admin\n      const workspaceMember = await storage.createWorkspaceMember({\n        workspaceId: workspace.id,\n        userId: user.id,\n        role: \"admin\",\n        status: \"active\",\n      });\n\n      // Create default team\n      const team = await storage.createTeam({\n        workspaceId: workspace.id,\n        name: \"Main Team\",\n        description: \"Default team for releases\",\n      });\n\n      // Add user to team\n      await storage.createTeamMember({\n        teamId: team.id,\n        workspaceMemberId: workspaceMember.id,\n        role: \"admin\",\n      });\n\n      // Create default environments (Staging, UAT, Production)\n      const defaultEnvs = [\n        { name: \"Staging\", sortOrder: \"1\" },\n        { name: \"UAT\", sortOrder: \"2\" },\n        { name: \"Production\", sortOrder: \"3\" },\n      ];\n      \n      for (const env of defaultEnvs) {\n        await storage.createEnvironment({\n          teamId: team.id,\n          name: env.name,\n          sortOrder: env.sortOrder,\n          isDefault: true,\n        });\n      }\n\n      req.login(user, (err) => {\n        if (err) return next(err);\n        res.status(201).json(user);\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/login\", passport.authenticate(\"local\"), (req, res) => {\n    res.status(200).json(req.user);\n  });\n\n  app.post(\"/api/logout\", (req, res, next) => {\n    req.logout((err) => {\n      if (err) return next(err);\n      res.sendStatus(200);\n    });\n  });\n\n  app.get(\"/api/user\", (req, res) => {\n    if (!req.isAuthenticated()) return res.sendStatus(401);\n    res.json(req.user);\n  });\n}\n","size_bytes":4784},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"README.md":{"content":"# ReleaseStream - Release Management Dashboard\n\nA collaborative, editable flow dashboard for managing software releases across environments.\n\n## Prerequisites\n\n- Node.js (v20 or higher)\n- PostgreSQL database (or Neon Database connection string)\n- npm or yarn\n\n## Setup Instructions\n\n### 1. Install Dependencies\n\n```bash\nnpm install\n```\n\n### 2. Configure Database\n\nYou need to set up a `DATABASE_URL` environment variable. The app uses Neon Database (PostgreSQL).\n\n**Option A: Using a `.env` file (Recommended for local development)**\n\nCreate a `.env` file in the root directory:\n\n```env\nDATABASE_URL=postgresql://user:password@host:port/database\n```\n\n**Option B: Set environment variable directly**\n\n- **Windows PowerShell:**\n  ```powershell\n  $env:DATABASE_URL=\"postgresql://user:password@host:port/database\"\n  ```\n\n- **Windows CMD:**\n  ```cmd\n  set DATABASE_URL=postgresql://user:password@host:port/database\n  ```\n\n- **Linux/Mac:**\n  ```bash\n  export DATABASE_URL=\"postgresql://user:password@host:port/database\"\n  ```\n\n### 3. Initialize Database Schema\n\nRun the database migrations:\n\n```bash\nnpm run db:push\n```\n\n### 4. Start the Development Server\n\n```bash\nnpm run dev\n```\n\nThe application will start on **port 5000** (or the port specified in the `PORT` environment variable).\n\nOpen your browser and navigate to: `http://localhost:5000`\n\n## Available Scripts\n\n- `npm run dev` - Start the development server\n- `npm run build` - Build the application for production\n- `npm run start` - Start the production server (requires build first)\n- `npm run check` - Run TypeScript type checking\n- `npm run db:push` - Push database schema changes to the database\n\n## Project Structure\n\n- `client/` - React frontend application\n- `server/` - Express backend API\n- `shared/` - Shared TypeScript types and schemas\n- `migrations/` - Database migration files (generated by Drizzle)\n\n## Environment Variables\n\n- `DATABASE_URL` (required) - PostgreSQL connection string\n- `PORT` (optional) - Server port (default: 5000)\n- `NODE_ENV` - Environment mode (development/production)\n\n## Troubleshooting\n\n### Database Connection Issues\n\nIf you see \"DATABASE_URL must be set\", make sure you've set the environment variable correctly for your operating system.\n\n### Port Already in Use\n\nIf port 5000 is already in use, set the `PORT` environment variable to a different port:\n\n```bash\n# Windows PowerShell\n$env:PORT=\"3000\"\nnpm run dev\n\n# Linux/Mac\nPORT=3000 npm run dev\n```\n\n","size_bytes":2451},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/pages/AuthPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Anchor, Ship, Package, User, Users } from \"lucide-react\";\n\nexport default function AuthPage() {\n  const { user, loginMutation, registerMutation } = useAuth();\n  const [, setLocation] = useLocation();\n  const [loginData, setLoginData] = useState({ username: \"\", password: \"\" });\n  const [registerData, setRegisterData] = useState({ \n    username: \"\", \n    password: \"\", \n    email: \"\",\n    workspaceType: \"individual\" as \"individual\" | \"organization\",\n    workspaceName: \"\"\n  });\n\n  useEffect(() => {\n    if (user) {\n      setLocation(\"/\");\n    }\n  }, [user, setLocation]);\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    loginMutation.mutate(loginData);\n  };\n\n  const handleRegister = (e: React.FormEvent) => {\n    e.preventDefault();\n    registerMutation.mutate(registerData);\n  };\n\n  return (\n    <div className=\"min-h-screen grid lg:grid-cols-2\">\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"w-full max-w-md\">\n          <div className=\"text-center mb-8\">\n            <div className=\"flex items-center justify-center gap-2 mb-4\">\n              <Anchor className=\"w-10 h-10 text-primary\" />\n              <h1 className=\"text-4xl font-bold\">DockVoyage</h1>\n            </div>\n            <p className=\"text-muted-foreground\">\n              See your releases clearly.\n            </p>\n          </div>\n\n          <Tabs defaultValue=\"login\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"login\" data-testid=\"tab-login\">Login</TabsTrigger>\n              <TabsTrigger value=\"register\" data-testid=\"tab-register\">Sign Up</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"login\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Welcome aboard!</CardTitle>\n                  <CardDescription>\n                    Sign in to manage your releases\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleLogin} className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"login-username\">Username</Label>\n                      <Input\n                        id=\"login-username\"\n                        data-testid=\"input-login-username\"\n                        type=\"text\"\n                        placeholder=\"Enter your username\"\n                        value={loginData.username}\n                        onChange={(e) => setLoginData({ ...loginData, username: e.target.value })}\n                        required\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"login-password\">Password</Label>\n                      <Input\n                        id=\"login-password\"\n                        data-testid=\"input-login-password\"\n                        type=\"password\"\n                        placeholder=\"Enter your password\"\n                        value={loginData.password}\n                        onChange={(e) => setLoginData({ ...loginData, password: e.target.value })}\n                        required\n                      />\n                    </div>\n                    <Button\n                      type=\"submit\"\n                      className=\"w-full\"\n                      data-testid=\"button-login\"\n                      disabled={loginMutation.isPending}\n                    >\n                      {loginMutation.isPending ? \"Signing in...\" : \"Sign In\"}\n                    </Button>\n                  </form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"register\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Join the crew!</CardTitle>\n                  <CardDescription>\n                    Create your account and start shipping releases\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleRegister} className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"register-username\">Username</Label>\n                      <Input\n                        id=\"register-username\"\n                        data-testid=\"input-register-username\"\n                        type=\"text\"\n                        placeholder=\"Choose a username\"\n                        value={registerData.username}\n                        onChange={(e) => setRegisterData({ ...registerData, username: e.target.value })}\n                        required\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"register-email\">Email</Label>\n                      <Input\n                        id=\"register-email\"\n                        data-testid=\"input-register-email\"\n                        type=\"email\"\n                        placeholder=\"your@email.com\"\n                        value={registerData.email}\n                        onChange={(e) => setRegisterData({ ...registerData, email: e.target.value })}\n                        required\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"register-password\">Password</Label>\n                      <Input\n                        id=\"register-password\"\n                        data-testid=\"input-register-password\"\n                        type=\"password\"\n                        placeholder=\"Create a password\"\n                        value={registerData.password}\n                        onChange={(e) => setRegisterData({ ...registerData, password: e.target.value })}\n                        required\n                      />\n                    </div>\n                    <div className=\"space-y-3\">\n                      <div>\n                        <Label className=\"text-base font-semibold\">Choose Your Workspace Type</Label>\n                        <p className=\"text-sm text-muted-foreground mt-1\">\n                          This will create your workspace. You can invite team members later if you choose Organization.\n                        </p>\n                      </div>\n                      <RadioGroup\n                        value={registerData.workspaceType}\n                        onValueChange={(value: \"individual\" | \"organization\") => \n                          setRegisterData({ ...registerData, workspaceType: value })\n                        }\n                        data-testid=\"radio-workspace-type\"\n                      >\n                        <label htmlFor=\"individual\" className={`flex items-center space-x-2 border-2 rounded-lg p-4 cursor-pointer transition-all ${\n                          registerData.workspaceType === \"individual\" \n                            ? \"border-primary bg-primary/5 hover:bg-primary/10\" \n                            : \"border-border hover:bg-accent\"\n                        }`}>\n                          <RadioGroupItem value=\"individual\" id=\"individual\" data-testid=\"radio-individual\" />\n                          <div className=\"flex items-center gap-3 cursor-pointer flex-1\">\n                            <User className=\"h-5 w-5 text-primary\" />\n                            <div>\n                              <div className=\"font-semibold\">Individual</div>\n                              <div className=\"text-xs text-muted-foreground\">Personal workspace for your own projects</div>\n                            </div>\n                          </div>\n                        </label>\n                        <label htmlFor=\"organization\" className={`flex items-center space-x-2 border-2 rounded-lg p-4 cursor-pointer transition-all ${\n                          registerData.workspaceType === \"organization\" \n                            ? \"border-primary bg-primary/5 hover:bg-primary/10\" \n                            : \"border-border hover:bg-accent\"\n                        }`}>\n                          <RadioGroupItem value=\"organization\" id=\"organization\" data-testid=\"radio-organization\" />\n                          <div className=\"flex items-center gap-3 cursor-pointer flex-1\">\n                            <Users className=\"h-5 w-5 text-primary\" />\n                            <div>\n                              <div className=\"font-semibold\">Organization</div>\n                              <div className=\"text-xs text-muted-foreground\">Team workspace - invite members and collaborate</div>\n                            </div>\n                          </div>\n                        </label>\n                      </RadioGroup>\n                    </div>\n                    {registerData.workspaceType === \"organization\" && (\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"workspace-name\">Organization Name</Label>\n                        <Input\n                          id=\"workspace-name\"\n                          data-testid=\"input-workspace-name\"\n                          type=\"text\"\n                          placeholder=\"e.g., Acme Corp\"\n                          value={registerData.workspaceName}\n                          onChange={(e) => setRegisterData({ ...registerData, workspaceName: e.target.value })}\n                          required={registerData.workspaceType === \"organization\"}\n                        />\n                      </div>\n                    )}\n                    <Button\n                      type=\"submit\"\n                      className=\"w-full\"\n                      data-testid=\"button-register\"\n                      disabled={registerMutation.isPending}\n                    >\n                      {registerMutation.isPending ? \"Creating account...\" : \"Create Account\"}\n                    </Button>\n                  </form>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n\n      <div className=\"hidden lg:flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background p-8 relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDM0djItMnptMCAwdjJoLTJ2LTJoMnptMCAwdi0yaC0ydjJoMnoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-40\"></div>\n        <div className=\"relative z-10 text-center max-w-lg\">\n          <div className=\"flex justify-center gap-8 mb-8\">\n            <Ship className=\"h-24 w-24 text-primary/70\" />\n            <Package className=\"h-24 w-24 text-primary/50\" />\n          </div>\n          <h2 className=\"text-4xl font-bold mb-4\">\n            DockVoyage\n          </h2>\n          <p className=\"text-xl text-muted-foreground mb-6\">\n            Your trusted platform for managing releases across environments\n          </p>\n          <div className=\"space-y-3 text-left\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                <div className=\"h-2 w-2 rounded-full bg-primary\"></div>\n              </div>\n              <div>\n                <p className=\"font-medium\">Track releases in real-time</p>\n                <p className=\"text-sm text-muted-foreground\">Monitor deployments across staging, UAT, and production</p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                <div className=\"h-2 w-2 rounded-full bg-primary\"></div>\n              </div>\n              <div>\n                <p className=\"font-medium\">Manage environment flows</p>\n                <p className=\"text-sm text-muted-foreground\">Create visual workflows for your deployment pipeline</p>\n              </div>\n            </div>\n            <div className=\"flex items-start gap-3\">\n              <div className=\"h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                <div className=\"h-2 w-2 rounded-full bg-primary\"></div>\n              </div>\n              <div>\n                <p className=\"font-medium\">Block and resolve issues</p>\n                <p className=\"text-sm text-muted-foreground\">Track blockers and keep your team informed</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":13314},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, ReactNode, useContext } from \"react\";\nimport {\n  useQuery,\n  useMutation,\n  UseMutationResult,\n} from \"@tanstack/react-query\";\nimport { User as SelectUser, InsertUser } from \"@shared/schema\";\nimport { getQueryFn, apiRequest, queryClient } from \"../lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype AuthContextType = {\n  user: SelectUser | null;\n  isLoading: boolean;\n  error: Error | null;\n  loginMutation: UseMutationResult<SelectUser, Error, LoginData>;\n  logoutMutation: UseMutationResult<void, Error, void>;\n  registerMutation: UseMutationResult<SelectUser, Error, InsertUser>;\n};\n\ntype LoginData = Pick<InsertUser, \"username\" | \"password\">;\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const { toast } = useToast();\n  const {\n    data: user,\n    error,\n    isLoading,\n  } = useQuery<SelectUser | undefined, Error>({\n    queryKey: [\"/api/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginData) => {\n      const res = await apiRequest(\"POST\", \"/api/login\", credentials);\n      return await res.json();\n    },\n    onSuccess: (user: SelectUser) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (credentials: InsertUser) => {\n      const res = await apiRequest(\"POST\", \"/api/register\", credentials);\n      return await res.json();\n    },\n    onSuccess: (user: SelectUser) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Registration failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/logout\");\n    },\n    onSuccess: () => {\n      queryClient.setQueryData([\"/api/user\"], null);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Logout failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: user ?? null,\n        isLoading,\n        error,\n        loginMutation,\n        logoutMutation,\n        registerMutation,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":2815},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"scripts/init-db.ts":{"content":"import \"dotenv/config\";\nimport { db } from \"../server/db\";\nimport { sql } from \"drizzle-orm\";\n\nasync function initDb() {\n  try {\n    console.log(\"Testing database connection...\");\n    \n    // Test connection\n    const result = await db.execute(sql`SELECT 1 as test`);\n    console.log(\"✓ Database connection successful\");\n    \n    // Check if tables exist\n    const tables = await db.execute(sql`\n      SELECT table_name \n      FROM information_schema.tables \n      WHERE table_schema = 'public'\n      ORDER BY table_name\n    `);\n    \n    console.log(\"\\nExisting tables:\");\n    if (tables.rows.length === 0) {\n      console.log(\"  No tables found - you need to run: npm run db:push\");\n    } else {\n      tables.rows.forEach((row: any) => {\n        console.log(`  - ${row.table_name}`);\n      });\n    }\n    \n    // Check if enums exist\n    const enums = await db.execute(sql`\n      SELECT typname \n      FROM pg_type \n      WHERE typtype = 'e'\n      ORDER BY typname\n    `);\n    \n    console.log(\"\\nExisting enum types:\");\n    if (enums.rows.length === 0) {\n      console.log(\"  No enums found\");\n    } else {\n      enums.rows.forEach((row: any) => {\n        console.log(`  - ${row.typname}`);\n      });\n    }\n    \n    process.exit(0);\n  } catch (error: any) {\n    console.error(\"✗ Database error:\", error.message);\n    if (error.stack) {\n      console.error(error.stack);\n    }\n    process.exit(1);\n  }\n}\n\ninitDb();\n\n","size_bytes":1420},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ReleaseCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, GitBranch } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ReleaseCardProps {\n  id: string;\n  name: string;\n  version: string;\n  status: \"not_started\" | \"in_progress\" | \"blocked\" | \"done\";\n  progress: number;\n  updatedAt: string;\n  onClick?: () => void;\n}\n\nconst statusConfig = {\n  not_started: { label: \"Not Started\", className: \"bg-muted text-muted-foreground\" },\n  in_progress: { label: \"In Progress\", className: \"bg-primary/10 text-primary\" },\n  blocked: { label: \"Blocked\", className: \"bg-destructive/10 text-destructive\" },\n  done: { label: \"Done\", className: \"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400\" },\n};\n\nexport default function ReleaseCard({\n  id,\n  name,\n  version,\n  status,\n  progress,\n  updatedAt,\n  onClick,\n}: ReleaseCardProps) {\n  const statusInfo = statusConfig[status];\n\n  return (\n    <Card\n      className=\"p-4 cursor-pointer hover-elevate active-elevate-2 transition-all\"\n      onClick={onClick}\n      data-testid={`card-release-${id}`}\n    >\n      <div className=\"flex flex-col gap-3\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"font-semibold text-sm truncate\" data-testid={`text-release-name-${id}`}>\n              {name}\n            </h3>\n            <div className=\"flex items-center gap-1.5 mt-1 text-xs text-muted-foreground\">\n              <GitBranch className=\"h-3 w-3\" />\n              <span className=\"font-mono\" data-testid={`text-version-${id}`}>{version}</span>\n            </div>\n          </div>\n          <Badge className={cn(\"text-xs\", statusInfo.className)} data-testid={`badge-status-${id}`}>\n            {statusInfo.label}\n          </Badge>\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-muted-foreground\">Progress</span>\n            <span className=\"font-medium\" data-testid={`text-progress-${id}`}>{progress}%</span>\n          </div>\n          <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-primary transition-all duration-300\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n          <Calendar className=\"h-3 w-3\" />\n          <span data-testid={`text-updated-${id}`}>{updatedAt}</span>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":2625},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"drizzle.config.ts":{"content":"import \"dotenv/config\";\nimport { defineConfig } from \"drizzle-kit\";\nimport * as schema from \"./shared/schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n  verbose: true,\n  strict: true,\n});\n","size_bytes":425},"client/src/hooks/useReleases.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport interface Release {\n  id: string;\n  name: string;\n  version?: string;\n  team?: string;\n  createdBy?: string;\n  createdAt: string;\n  status?: \"not_started\" | \"in_progress\" | \"blocked\" | \"done\";\n  progress?: number;\n  stages?: any[];\n}\n\nexport interface CreateReleaseData {\n  name: string;\n  version?: string;\n  teamId?: string; // Changed from 'team' to 'teamId' to match API\n  createdBy?: string;\n}\n\nexport function useReleases(teamId?: string) {\n  return useQuery<Release[]>({\n    queryKey: [\"/api/releases\", teamId ? { teamId } : undefined],\n    // The default queryFn from queryClient will handle the API_BASE_URL and query params\n  });\n}\n\nexport function useRelease(id: string | null) {\n  return useQuery<Release>({\n    queryKey: id ? [`/api/releases/${id}`] : [\"skip\"],\n    enabled: !!id,\n  });\n}\n\nexport function useCreateRelease() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (data: CreateReleaseData) => {\n      const res = await apiRequest(\"POST\", \"/api/releases\", data);\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/releases\"] });\n      // Also invalidate with teamId if provided\n      if (variables.teamId) {\n        queryClient.invalidateQueries({ queryKey: [\"/api/releases\", { teamId: variables.teamId }] });\n      }\n    },\n  });\n}\n\nexport function useUpdateRelease() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<CreateReleaseData> }) => {\n      const res = await apiRequest(\"PATCH\", `/api/releases/${id}`, data);\n      return res.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/releases\"] });\n      queryClient.invalidateQueries({ queryKey: [`/api/releases/${variables.id}`] });\n    },\n  });\n}\n\nexport function useDeleteRelease() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (releaseId: string) => {\n      const res = await apiRequest(\"DELETE\", `/api/releases/${releaseId}`);\n      return res;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/releases\"] });\n    },\n  });\n}\n\n","size_bytes":2371},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/lib/protected-route.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Loader2 } from \"lucide-react\";\nimport { Redirect, Route } from \"wouter\";\n\nexport function ProtectedRoute({\n  path,\n  component: Component,\n}: {\n  path: string;\n  component: () => React.JSX.Element;\n}) {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <Route path={path}>\n        <div className=\"flex items-center justify-center min-h-screen\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-border\" />\n        </div>\n      </Route>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Route path={path}>\n        <Redirect to=\"/auth\" />\n      </Route>\n    );\n  }\n\n  return <Route path={path} component={Component} />;\n}\n","size_bytes":706},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"@/lib/theme-provider\";\n\nexport default function ThemeToggle() {\n  const { theme, toggleTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"h-5 w-5\" />\n      ) : (\n        <Sun className=\"h-5 w-5\" />\n      )}\n    </Button>\n  );\n}\n","size_bytes":508},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth } from \"./auth\";\nimport { insertReleaseSchema, insertStageSchema, insertTaskSchema, insertBlockerSchema, insertWorkspaceInvitationSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { randomBytes } from \"crypto\";\nimport { sendInvitationEmail } from \"./email\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Helper: Get user's teams and validate access\n  async function getUserTeams(userId: string) {\n    const workspaces = await storage.getWorkspacesByUser(userId);\n    if (workspaces.length === 0) return [];\n    const teams = await storage.getTeamsByWorkspace(workspaces[0].id);\n    return teams;\n  }\n  \n  async function validateTeamAccess(userId: string, teamId: string) {\n    const teams = await getUserTeams(userId);\n    return teams.some(t => t.id === teamId);\n  }\n\n  // Setup authentication routes\n  setupAuth(app);\n\n  // Workspaces\n  app.get(\"/api/workspaces\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      res.json(workspaces);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Teams (Projects)\n  app.get(\"/api/teams\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      if (workspaces.length === 0) {\n        return res.json([]);\n      }\n      \n      const teams = await storage.getTeamsByWorkspace(workspaces[0].id);\n      res.json(teams);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/teams\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      if (workspaces.length === 0) {\n        return res.status(400).json({ message: \"No workspace found\" });\n      }\n      \n      const { name, description } = req.body;\n      if (!name) {\n        return res.status(400).json({ message: \"Team name is required\" });\n      }\n      \n      const team = await storage.createTeam({\n        workspaceId: workspaces[0].id,\n        name,\n        description: description || null,\n      });\n      \n      // Create default environments for the new team\n      const defaultEnvs = [\n        { name: \"Staging\", sortOrder: \"1\" },\n        { name: \"UAT\", sortOrder: \"2\" },\n        { name: \"Production\", sortOrder: \"3\" },\n      ];\n      \n      for (const env of defaultEnvs) {\n        await storage.createEnvironment({\n          teamId: team.id,\n          name: env.name,\n          sortOrder: env.sortOrder,\n          isDefault: true,\n        });\n      }\n      \n      res.status(201).json(team);\n    } catch (error: any) {\n      if (error.code === '23505') { // Unique constraint violation\n        return res.status(400).json({ message: \"A project with this name already exists\" });\n      }\n      next(error);\n    }\n  });\n\n  app.delete(\"/api/teams/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      if (workspaces.length === 0) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const team = await storage.getTeam(req.params.id);\n      if (!team) {\n        return res.status(404).json({ message: \"Project not found\" });\n      }\n      \n      // Verify team belongs to user's workspace\n      if (team.workspaceId !== workspaces[0].id) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      await storage.deleteTeam(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Health check endpoint\n  app.get(\"/api/health\", async (req, res) => {\n    try {\n      // Test database connection\n      await storage.getReleases();\n      res.json({ status: \"ok\", database: \"connected\" });\n    } catch (error: any) {\n      res.status(500).json({ \n        status: \"error\", \n        database: \"disconnected\",\n        error: error.message,\n        ...(process.env.NODE_ENV === \"development\" && { stack: error.stack })\n      });\n    }\n  });\n\n  // Environments\n  app.post(\"/api/teams/:teamId/environments\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const { teamId } = req.params;\n      const hasAccess = await validateTeamAccess(req.user!.id, teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const { name, sortOrder } = req.body;\n      if (!name) {\n        return res.status(400).json({ message: \"Environment name is required\" });\n      }\n      \n      const environment = await storage.createEnvironment({\n        teamId,\n        name,\n        sortOrder: sortOrder || \"0\",\n        isDefault: false,\n      });\n      \n      res.status(201).json(environment);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Releases\n  app.get(\"/api/releases\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      // Get user's workspaces and teams\n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      if (workspaces.length === 0) {\n        return res.json([]);\n      }\n      \n      const teams = await storage.getTeamsByWorkspace(workspaces[0].id);\n      if (teams.length === 0) {\n        return res.json([]);\n      }\n      \n      // Validate teamId if provided\n      const requestedTeamId = req.query.teamId as string | undefined;\n      const teamId = requestedTeamId || teams[0].id;\n      \n      // Security: Verify teamId belongs to user's workspace\n      const hasAccess = teams.some(t => t.id === teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied to this team\" });\n      }\n      \n      const releases = await storage.getReleases({ teamId });\n      \n      // Attach stages, environments, and blockers to each release for filtering\n      const releasesWithStages = await Promise.all(\n        releases.map(async (release) => {\n          const stages = await storage.getStagesByRelease(release.id);\n          const stagesWithBlockers = await Promise.all(\n            stages.map(async (stage) => {\n              const environment = await storage.getEnvironment(stage.environmentId);\n              const blockers = await storage.getBlockersByStage(stage.id, true);\n              return { ...stage, environment, blockers };\n            })\n          );\n          return { ...release, stages: stagesWithBlockers };\n        })\n      );\n      \n      res.json(releasesWithStages);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/releases/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const release = await storage.getRelease(req.params.id);\n      if (!release) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      // Verify user has access to this release's team\n      const hasAccess = await validateTeamAccess(req.user!.id, release.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      // Get stages for this release\n      const stages = await storage.getStagesByRelease(req.params.id);\n      \n      // Get tasks for each stage\n      const stagesWithTasks = await Promise.all(\n        stages.map(async (stage) => {\n          const tasks = await storage.getTasksByStage(stage.id);\n          const blockers = await storage.getBlockersByStage(stage.id, true);\n          return { ...stage, tasks, blockers };\n        })\n      );\n      \n      res.json({ ...release, stages: stagesWithTasks });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/releases\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      // Get user's workspaces and teams\n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      if (workspaces.length === 0) {\n        return res.status(400).json({ message: \"No workspace found\" });\n      }\n      \n      const teams = await storage.getTeamsByWorkspace(workspaces[0].id);\n      if (teams.length === 0) {\n        return res.status(400).json({ message: \"No team found\" });\n      }\n      \n      // Determine teamId and validate authorization\n      const requestedTeamId = req.body.teamId || teams[0].id;\n      \n      // Security: Verify teamId belongs to user's workspace\n      const hasAccess = teams.some(t => t.id === requestedTeamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied to this team\" });\n      }\n      \n      const data = insertReleaseSchema.parse({\n        ...req.body,\n        teamId: requestedTeamId,\n        createdBy: req.user!.id,\n      });\n      \n      const release = await storage.createRelease(data);\n      \n      // Get default environments for this team and create stages\n      const environments = await storage.getEnvironmentsByTeam(data.teamId);\n      for (const environment of environments) {\n        await storage.createStage({\n          releaseId: release.id,\n          environmentId: environment.id,\n          status: \"not_started\",\n        });\n      }\n      \n      // Log activity\n      await storage.createActivityLog({\n        workspaceId: workspaces[0].id,\n        releaseId: release.id,\n        actor: req.user!.username,\n        action: \"release.created\",\n        meta: { releaseName: release.name },\n      });\n      \n      res.status(201).json(release);\n    } catch (error: any) {\n      console.error(\"Error creating release:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      if (error.code) {\n        console.error(\"Database error code:\", error.code);\n      }\n      if (error.message) {\n        console.error(\"Database error message:\", error.message);\n      }\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/releases/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const existing = await storage.getRelease(req.params.id);\n      if (!existing) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      const hasAccess = await validateTeamAccess(req.user!.id, existing.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertReleaseSchema.partial().parse(req.body);\n      const release = await storage.updateRelease(req.params.id, data);\n      res.json(release);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.delete(\"/api/releases/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const existing = await storage.getRelease(req.params.id);\n      if (!existing) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      const hasAccess = await validateTeamAccess(req.user!.id, existing.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      await storage.deleteRelease(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Stages\n  app.post(\"/api/releases/:releaseId/stages\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const { releaseId } = req.params;\n      const release = await storage.getRelease(releaseId);\n      if (!release) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      const hasAccess = await validateTeamAccess(req.user!.id, release.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertStageSchema.parse({\n        ...req.body,\n        releaseId,\n      });\n      \n      const stage = await storage.createStage(data);\n      res.status(201).json(stage);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.get(\"/api/stages/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const stage = await storage.getStage(req.params.id);\n      if (!stage) {\n        return res.status(404).json({ message: \"Stage not found\" });\n      }\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const tasks = await storage.getTasksByStage(stage.id);\n      const blockers = await storage.getBlockersByStage(stage.id);\n      \n      res.json({ ...stage, tasks, blockers });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/stages/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const existing = await storage.getStage(req.params.id);\n      if (!existing) {\n        return res.status(404).json({ message: \"Stage not found\" });\n      }\n      \n      const release = await storage.getRelease(existing.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertStageSchema.partial().parse(req.body);\n      const stage = await storage.updateStage(req.params.id, data);\n      \n      // Log activity\n      await storage.createActivityLog({\n        workspaceId: (await storage.getWorkspacesByUser(req.user!.id))[0]?.id,\n        releaseId: stage!.releaseId,\n        stageId: stage!.id,\n        actor: req.user!.username,\n        action: \"stage.updated\",\n        meta: { changes: data },\n      });\n      \n      res.json(stage);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.post(\"/api/stages/:id/approve\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const stage = await storage.getStage(req.params.id);\n      if (!stage) {\n        return res.status(404).json({ message: \"Stage not found\" });\n      }\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const { approver, note } = req.body;\n      \n      // Check if all required tasks are done\n      const tasks = await storage.getTasksByStage(stage.id);\n      const requiredTasks = tasks.filter(t => t.required);\n      const allRequiredDone = requiredTasks.every(t => t.status === \"done\");\n      \n      if (!allRequiredDone) {\n        return res.status(400).json({ \n          message: \"Cannot approve stage: not all required tasks are completed\" \n        });\n      }\n      \n      // Update stage\n      const updatedStage = await storage.updateStage(req.params.id, {\n        approver,\n        status: \"done\",\n        endedAt: new Date(),\n      });\n      \n      // Log activity\n      await storage.createActivityLog({\n        workspaceId: (await storage.getWorkspacesByUser(req.user!.id))[0]?.id,\n        releaseId: stage.releaseId,\n        stageId: stage.id,\n        actor: approver || req.user!.username,\n        action: \"stage.approved\",\n        meta: { note },\n      });\n      \n      res.json(updatedStage);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Tasks\n  app.post(\"/api/stages/:stageId/tasks\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const stage = await storage.getStage(req.params.stageId);\n      if (!stage) {\n        return res.status(404).json({ message: \"Stage not found\" });\n      }\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertTaskSchema.parse({ ...req.body, stageId: req.params.stageId });\n      const task = await storage.createTask(data);\n      \n      // Log activity\n      await storage.createActivityLog({\n        workspaceId: (await storage.getWorkspacesByUser(req.user!.id))[0]?.id,\n        releaseId: stage.releaseId,\n        stageId: stage.id,\n        actor: req.user!.username,\n        action: \"task.created\",\n        meta: { taskId: task.id, taskTitle: task.title },\n      });\n      \n      res.status(201).json(task);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/tasks/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const task = await storage.getTask(req.params.id);\n      if (!task) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n      \n      const stage = await storage.getStage(task.stageId);\n      if (!stage) return res.sendStatus(404);\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertTaskSchema.partial().parse(req.body);\n      const updatedTask = await storage.updateTask(req.params.id, data);\n      \n      await storage.createActivityLog({\n        workspaceId: (await storage.getWorkspacesByUser(req.user!.id))[0]?.id,\n        releaseId: stage.releaseId,\n        stageId: stage.id,\n        actor: req.user!.username,\n        action: \"task.updated\",\n        meta: { taskId: task.id, changes: data },\n      });\n      \n      res.json(updatedTask);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.delete(\"/api/tasks/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const task = await storage.getTask(req.params.id);\n      if (!task) {\n        return res.status(404).json({ message: \"Task not found\" });\n      }\n      \n      const stage = await storage.getStage(task.stageId);\n      if (!stage) return res.sendStatus(404);\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      await storage.deleteTask(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Blockers\n  app.post(\"/api/stages/:stageId/blockers\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const stage = await storage.getStage(req.params.stageId);\n      if (!stage) {\n        return res.status(404).json({ message: \"Stage not found\" });\n      }\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertBlockerSchema.parse({ ...req.body, stageId: req.params.stageId });\n      const blocker = await storage.createBlocker(data);\n      \n      // Update stage status to blocked if not already\n      if (stage.status !== \"blocked\") {\n        await storage.updateStage(stage.id, { status: \"blocked\" });\n      }\n      \n      // Log activity\n      await storage.createActivityLog({\n        workspaceId: (await storage.getWorkspacesByUser(req.user!.id))[0]?.id,\n        releaseId: stage.releaseId,\n        stageId: stage.id,\n        actor: req.user!.username,\n        action: \"blocker.created\",\n        meta: { blockerId: blocker.id, severity: blocker.severity },\n      });\n      \n      res.status(201).json(blocker);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/blockers/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const blocker = await storage.getBlocker(req.params.id);\n      if (!blocker) {\n        return res.status(404).json({ message: \"Blocker not found\" });\n      }\n      \n      const stage = await storage.getStage(blocker.stageId);\n      if (!stage) return res.sendStatus(404);\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const data = insertBlockerSchema.partial().parse(req.body);\n      const updatedBlocker = await storage.updateBlocker(req.params.id, data);\n      \n      // If blocker is resolved, check if stage should be unblocked\n      if (data.active === false) {\n        const activeBlockers = await storage.getBlockersByStage(stage.id, true);\n        if (activeBlockers.length === 0 && stage.status === \"blocked\") {\n          await storage.updateStage(stage.id, { status: \"in_progress\" });\n        }\n      }\n      \n      await storage.createActivityLog({\n        workspaceId: (await storage.getWorkspacesByUser(req.user!.id))[0]?.id,\n        releaseId: stage.releaseId,\n        stageId: stage.id,\n        actor: req.user!.username,\n        action: \"blocker.updated\",\n        meta: { blockerId: blocker.id, changes: data },\n      });\n      \n      res.json(updatedBlocker);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Validation error\", errors: error.errors });\n      }\n      next(error);\n    }\n  });\n\n  app.delete(\"/api/blockers/:id\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const blocker = await storage.getBlocker(req.params.id);\n      if (!blocker) {\n        return res.status(404).json({ message: \"Blocker not found\" });\n      }\n      \n      const stage = await storage.getStage(blocker.stageId);\n      if (!stage) return res.sendStatus(404);\n      \n      const release = await storage.getRelease(stage.releaseId);\n      if (!release || !(await validateTeamAccess(req.user!.id, release.teamId))) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      await storage.deleteBlocker(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Diagrams\n  app.get(\"/api/releases/:releaseId/diagram\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const release = await storage.getRelease(req.params.releaseId);\n      if (!release) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      const hasAccess = await validateTeamAccess(req.user!.id, release.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const diagram = await storage.getDiagramByRelease(req.params.releaseId);\n      if (!diagram) {\n        return res.status(404).json({ message: \"Diagram not found\" });\n      }\n      res.json(diagram);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.put(\"/api/releases/:releaseId/diagram\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const release = await storage.getRelease(req.params.releaseId);\n      if (!release) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      const hasAccess = await validateTeamAccess(req.user!.id, release.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const { layout } = req.body;\n      const diagram = await storage.updateDiagramLayout(req.params.releaseId, layout);\n      res.json(diagram);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Activity Log\n  app.get(\"/api/activity\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const releaseId = req.query.releaseId as string | undefined;\n      const stageId = req.query.stageId as string | undefined;\n      \n      // Always validate access to the release\n      let release;\n      if (releaseId) {\n        release = await storage.getRelease(releaseId);\n      } else if (stageId) {\n        const stage = await storage.getStage(stageId);\n        if (stage) {\n          release = await storage.getRelease(stage.releaseId);\n        }\n      }\n      \n      if (!release) {\n        return res.status(404).json({ message: \"Release not found\" });\n      }\n      \n      const hasAccess = await validateTeamAccess(req.user!.id, release.teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const logs = await storage.getActivityLog({ releaseId, stageId });\n      res.json(logs);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Dashboard\n  app.get(\"/api/dashboard\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n      \n      const teams = await getUserTeams(req.user!.id);\n      if (teams.length === 0) {\n        return res.json([]);\n      }\n      \n      const requestedTeamId = req.query.teamId as string | undefined;\n      const teamId = requestedTeamId || teams[0].id;\n      \n      const hasAccess = teams.some(t => t.id === teamId);\n      if (!hasAccess) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const releases = await storage.getReleases({ teamId });\n      \n      // Calculate status and progress for each release\n      const releasesWithStatus = await Promise.all(\n        releases.map(async (release) => {\n          const stages = await storage.getStagesByRelease(release.id);\n          \n          const stagesWithTasks = await Promise.all(\n            stages.map(async (stage) => {\n              const tasks = await storage.getTasksByStage(stage.id);\n              return { ...stage, tasks };\n            })\n          );\n          \n          // Calculate overall progress\n          const allTasks = stagesWithTasks.flatMap(s => s.tasks);\n          const completedTasks = allTasks.filter(t => t.status === \"done\").length;\n          const progress = allTasks.length > 0 ? Math.round((completedTasks / allTasks.length) * 100) : 0;\n          \n          // Determine overall status\n          let status: \"not_started\" | \"in_progress\" | \"blocked\" | \"done\" = \"not_started\";\n          if (stagesWithTasks.some(s => s.status === \"blocked\")) {\n            status = \"blocked\";\n          } else if (stagesWithTasks.some(s => s.status === \"in_progress\")) {\n            status = \"in_progress\";\n          } else if (stagesWithTasks.every(s => s.status === \"done\")) {\n            status = \"done\";\n          } else if (stagesWithTasks.some(s => s.status === \"in_progress\" || s.status === \"done\")) {\n            status = \"in_progress\";\n          }\n          \n          return {\n            ...release,\n            status,\n            progress,\n            stages: stagesWithTasks.length,\n          };\n        })\n      );\n      \n      res.json({ releases: releasesWithStatus });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Workspace Invitations\n  app.post(\"/api/invitations\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n\n      // Validate request body\n      const validationResult = insertWorkspaceInvitationSchema.extend({\n        workspaceId: z.string(),\n      }).safeParse({\n        email: req.body.email,\n        role: req.body.role,\n        workspaceId: req.body.workspaceId,\n        inviterId: req.user!.id,\n        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n      });\n\n      if (!validationResult.success) {\n        return res.status(400).json({ \n          message: \"Invalid invitation data\",\n          errors: validationResult.error.errors,\n        });\n      }\n\n      const { email, role, workspaceId } = validationResult.data;\n\n      // Verify user has admin access to the workspace\n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      const workspace = workspaces.find(w => w.id === workspaceId);\n      \n      if (!workspace) {\n        return res.status(403).json({ message: \"Access denied to this workspace\" });\n      }\n\n      const workspaceMember = await storage.getWorkspaceMemberByUserAndWorkspace(req.user!.id, workspaceId);\n      if (!workspaceMember || workspaceMember.role !== \"admin\") {\n        return res.status(403).json({ message: \"Only workspace admins can invite members\" });\n      }\n\n      // Check if user already exists and is a member\n      const existingInvitations = await storage.getWorkspaceInvitations(workspaceId);\n      const hasPendingInvite = existingInvitations.some(\n        inv => inv.email === email && inv.status === \"pending\"\n      );\n      \n      if (hasPendingInvite) {\n        return res.status(400).json({ message: \"An invitation has already been sent to this email\" });\n      }\n\n      // Create invitation\n      const token = randomBytes(32).toString(\"hex\");\n      const expiresAt = new Date();\n      expiresAt.setDate(expiresAt.getDate() + 7); // 7 days from now\n\n      const invitation = await storage.createWorkspaceInvitation({\n        workspaceId,\n        email,\n        inviterId: req.user!.id,\n        role: role || \"developer\",\n        token,\n        expiresAt,\n      });\n\n      // Send invitation email\n      try {\n        // Get base URL from request headers\n        const host = req.get('host');\n        await sendInvitationEmail(\n          email,\n          req.user!.username,\n          workspace.name,\n          role || \"developer\",\n          token,\n          host\n        );\n      } catch (emailError: any) {\n        console.error(\"Failed to send invitation email:\", emailError);\n        // Don't fail the request if email fails, just log it\n      }\n\n      res.status(201).json(invitation);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/invitations\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n\n      const workspaces = await storage.getWorkspacesByUser(req.user!.id);\n      if (workspaces.length === 0) {\n        return res.json([]);\n      }\n\n      // Verify user is an admin of the workspace\n      const workspaceMember = await storage.getWorkspaceMemberByUserAndWorkspace(\n        req.user!.id,\n        workspaces[0].id\n      );\n      if (!workspaceMember || workspaceMember.role !== \"admin\") {\n        return res.status(403).json({ message: \"Only workspace admins can view invitations\" });\n      }\n\n      const invitations = await storage.getWorkspaceInvitations(workspaces[0].id);\n      \n      // Remove sensitive token data from response\n      const sanitizedInvitations = invitations.map(inv => ({\n        id: inv.id,\n        email: inv.email,\n        role: inv.role,\n        status: inv.status,\n        createdAt: inv.createdAt,\n        acceptedAt: inv.acceptedAt,\n        expiresAt: inv.expiresAt,\n      }));\n      \n      res.json(sanitizedInvitations);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/invitations/:token\", async (req, res, next) => {\n    try {\n      const { token } = req.params;\n      const invitation = await storage.getWorkspaceInvitationByToken(token);\n      \n      if (!invitation) {\n        return res.status(404).json({ message: \"Invitation not found\" });\n      }\n\n      if (invitation.status !== \"pending\") {\n        return res.status(400).json({ message: \"This invitation has already been used\" });\n      }\n\n      if (new Date() > new Date(invitation.expiresAt)) {\n        return res.status(400).json({ message: \"This invitation has expired\" });\n      }\n\n      const workspace = await storage.getWorkspace(invitation.workspaceId);\n      const inviter = await storage.getUser(invitation.inviterId);\n\n      res.json({\n        ...invitation,\n        workspaceName: workspace?.name,\n        inviterName: inviter?.username,\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/invitations/:token/accept\", async (req, res, next) => {\n    try {\n      if (!req.isAuthenticated()) return res.sendStatus(401);\n\n      const { token } = req.params;\n      const invitation = await storage.getWorkspaceInvitationByToken(token);\n      \n      if (!invitation) {\n        return res.status(404).json({ message: \"Invitation not found\" });\n      }\n\n      if (invitation.status !== \"pending\") {\n        return res.status(400).json({ message: \"This invitation has already been used\" });\n      }\n\n      if (new Date() > new Date(invitation.expiresAt)) {\n        return res.status(400).json({ message: \"This invitation has expired\" });\n      }\n\n      // Check if user's email matches the invitation\n      if (req.user!.email !== invitation.email) {\n        return res.status(403).json({ \n          message: \"This invitation was sent to a different email address\" \n        });\n      }\n\n      // Add user to workspace\n      await storage.createWorkspaceMember({\n        workspaceId: invitation.workspaceId,\n        userId: req.user!.id,\n        role: invitation.role,\n        status: \"active\",\n      });\n\n      // Update invitation status\n      await storage.updateWorkspaceInvitation(invitation.id, {\n        status: \"accepted\",\n        acceptedAt: new Date(),\n        invitedUserId: req.user!.id,\n      });\n\n      res.json({ message: \"Invitation accepted successfully\" });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":34956},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, boolean, jsonb, pgEnum, unique } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Enums\nexport const workspaceTypeEnum = pgEnum(\"workspace_type\", [\"individual\", \"organization\"]);\nexport const workspaceRoleEnum = pgEnum(\"workspace_role\", [\"admin\", \"developer\"]);\nexport const memberStatusEnum = pgEnum(\"member_status\", [\"active\", \"inactive\"]);\nexport const invitationStatusEnum = pgEnum(\"invitation_status\", [\"pending\", \"accepted\", \"declined\", \"expired\"]);\nexport const teamRoleEnum = pgEnum(\"team_role\", [\"admin\", \"member\"]);\nexport const stageStatusEnum = pgEnum(\"stage_status\", [\"not_started\", \"in_progress\", \"blocked\", \"done\"]);\nexport const taskStatusEnum = pgEnum(\"task_status\", [\"todo\", \"doing\", \"done\", \"na\"]);\nexport const blockerSeverityEnum = pgEnum(\"blocker_severity\", [\"P1\", \"P2\", \"P3\"]);\n\n// Users\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  email: text(\"email\"),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n  email: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\n// Workspaces\nexport const workspaces = pgTable(\"workspaces\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  type: workspaceTypeEnum(\"type\").notNull(),\n  slug: text(\"slug\").notNull(),\n  createdBy: varchar(\"created_by\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n}, (table) => ({\n  uniqueSlug: unique().on(table.slug),\n}));\n\nexport const insertWorkspaceSchema = createInsertSchema(workspaces).pick({\n  name: true,\n  type: true,\n  slug: true,\n  createdBy: true,\n});\n\nexport type InsertWorkspace = z.infer<typeof insertWorkspaceSchema>;\nexport type Workspace = typeof workspaces.$inferSelect;\n\n// Workspace Members\nexport const workspaceMembers = pgTable(\"workspace_members\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  workspaceId: varchar(\"workspace_id\").notNull().references(() => workspaces.id, { onDelete: \"cascade\" }),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  role: workspaceRoleEnum(\"role\").default(\"developer\").notNull(),\n  status: memberStatusEnum(\"status\").default(\"active\").notNull(),\n  joinedAt: timestamp(\"joined_at\", { withTimezone: true }).defaultNow().notNull(),\n}, (table) => ({\n  uniqueMembership: unique().on(table.workspaceId, table.userId),\n}));\n\nexport const insertWorkspaceMemberSchema = createInsertSchema(workspaceMembers).pick({\n  workspaceId: true,\n  userId: true,\n  role: true,\n  status: true,\n});\n\nexport type InsertWorkspaceMember = z.infer<typeof insertWorkspaceMemberSchema>;\nexport type WorkspaceMember = typeof workspaceMembers.$inferSelect;\n\n// Workspace Invitations\nexport const workspaceInvitations = pgTable(\"workspace_invitations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  workspaceId: varchar(\"workspace_id\").notNull().references(() => workspaces.id, { onDelete: \"cascade\" }),\n  email: text(\"email\").notNull(),\n  inviterId: varchar(\"inviter_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  role: workspaceRoleEnum(\"role\").default(\"developer\").notNull(),\n  token: text(\"token\").notNull().unique(),\n  status: invitationStatusEnum(\"status\").default(\"pending\").notNull(),\n  expiresAt: timestamp(\"expires_at\", { withTimezone: true }).notNull(),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n  acceptedAt: timestamp(\"accepted_at\", { withTimezone: true }),\n  invitedUserId: varchar(\"invited_user_id\").references(() => users.id, { onDelete: \"set null\" }),\n}, (table) => ({\n  uniquePendingInvite: unique().on(table.workspaceId, table.email, table.status),\n}));\n\nexport const insertWorkspaceInvitationSchema = createInsertSchema(workspaceInvitations).pick({\n  workspaceId: true,\n  email: true,\n  inviterId: true,\n  role: true,\n  expiresAt: true,\n});\n\nexport type InsertWorkspaceInvitation = z.infer<typeof insertWorkspaceInvitationSchema>;\nexport type WorkspaceInvitation = typeof workspaceInvitations.$inferSelect;\n\n// Teams\nexport const teams = pgTable(\"teams\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  workspaceId: varchar(\"workspace_id\").notNull().references(() => workspaces.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n}, (table) => ({\n  uniqueTeamName: unique().on(table.workspaceId, table.name),\n}));\n\nexport const insertTeamSchema = createInsertSchema(teams).pick({\n  workspaceId: true,\n  name: true,\n  description: true,\n});\n\nexport type InsertTeam = z.infer<typeof insertTeamSchema>;\nexport type Team = typeof teams.$inferSelect;\n\n// Team Members\nexport const teamMembers = pgTable(\"team_members\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teamId: varchar(\"team_id\").notNull().references(() => teams.id, { onDelete: \"cascade\" }),\n  workspaceMemberId: varchar(\"workspace_member_id\").notNull().references(() => workspaceMembers.id, { onDelete: \"cascade\" }),\n  role: teamRoleEnum(\"role\").default(\"member\").notNull(),\n  joinedAt: timestamp(\"joined_at\", { withTimezone: true }).defaultNow().notNull(),\n}, (table) => ({\n  uniqueTeamMembership: unique().on(table.teamId, table.workspaceMemberId),\n}));\n\nexport const insertTeamMemberSchema = createInsertSchema(teamMembers).pick({\n  teamId: true,\n  workspaceMemberId: true,\n  role: true,\n});\n\nexport type InsertTeamMember = z.infer<typeof insertTeamMemberSchema>;\nexport type TeamMember = typeof teamMembers.$inferSelect;\n\n// Environments (replaces hardcoded env enum)\nexport const environments = pgTable(\"environments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teamId: varchar(\"team_id\").notNull().references(() => teams.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  sortOrder: text(\"sort_order\").notNull(),\n  isDefault: boolean(\"is_default\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n}, (table) => ({\n  uniqueEnvName: unique().on(table.teamId, table.name),\n}));\n\nexport const insertEnvironmentSchema = createInsertSchema(environments).pick({\n  teamId: true,\n  name: true,\n  sortOrder: true,\n  isDefault: true,\n});\n\nexport type InsertEnvironment = z.infer<typeof insertEnvironmentSchema>;\nexport type Environment = typeof environments.$inferSelect;\n\n// Releases (now belongs to teams)\nexport const releases = pgTable(\"releases\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teamId: varchar(\"team_id\").notNull().references(() => teams.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  version: text(\"version\"),\n  changeWindow: jsonb(\"change_window\"),\n  createdBy: varchar(\"created_by\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertReleaseSchema = createInsertSchema(releases).pick({\n  teamId: true,\n  name: true,\n  version: true,\n  changeWindow: true,\n  createdBy: true,\n});\n\nexport type InsertRelease = z.infer<typeof insertReleaseSchema>;\nexport type Release = typeof releases.$inferSelect;\n\n// Stages (now references environment instead of enum)\nexport const stages = pgTable(\"stages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  releaseId: varchar(\"release_id\").notNull().references(() => releases.id, { onDelete: \"cascade\" }),\n  environmentId: varchar(\"environment_id\").notNull().references(() => environments.id, { onDelete: \"cascade\" }),\n  status: stageStatusEnum(\"status\").default(\"not_started\").notNull(),\n  approver: text(\"approver\"),\n  startedAt: timestamp(\"started_at\", { withTimezone: true }),\n  endedAt: timestamp(\"ended_at\", { withTimezone: true }),\n  lastUpdate: timestamp(\"last_update\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertStageSchema = createInsertSchema(stages).pick({\n  releaseId: true,\n  environmentId: true,\n  status: true,\n  approver: true,\n  startedAt: true,\n  endedAt: true,\n});\n\nexport type InsertStage = z.infer<typeof insertStageSchema>;\nexport type Stage = typeof stages.$inferSelect;\n\n// Flows (within environments/stages)\nexport const flows = pgTable(\"flows\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  stageId: varchar(\"stage_id\").notNull().references(() => stages.id, { onDelete: \"cascade\" }),\n  kind: text(\"kind\").notNull(),\n  config: jsonb(\"config\"),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertFlowSchema = createInsertSchema(flows).pick({\n  stageId: true,\n  kind: true,\n  config: true,\n});\n\nexport type InsertFlow = z.infer<typeof insertFlowSchema>;\nexport type Flow = typeof flows.$inferSelect;\n\n// Tasks\nexport const tasks = pgTable(\"tasks\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  stageId: varchar(\"stage_id\").notNull().references(() => stages.id, { onDelete: \"cascade\" }),\n  title: text(\"title\").notNull(),\n  details: text(\"details\"),\n  owner: text(\"owner\"),\n  required: boolean(\"required\").default(true).notNull(),\n  status: taskStatusEnum(\"status\").default(\"todo\").notNull(),\n  evidenceUrl: text(\"evidence_url\"),\n  updatedAt: timestamp(\"updated_at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertTaskSchema = createInsertSchema(tasks).pick({\n  stageId: true,\n  title: true,\n  details: true,\n  owner: true,\n  required: true,\n  status: true,\n  evidenceUrl: true,\n});\n\nexport type InsertTask = z.infer<typeof insertTaskSchema>;\nexport type Task = typeof tasks.$inferSelect;\n\n// Blockers\nexport const blockers = pgTable(\"blockers\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  stageId: varchar(\"stage_id\").notNull().references(() => stages.id, { onDelete: \"cascade\" }),\n  severity: blockerSeverityEnum(\"severity\").default(\"P2\").notNull(),\n  reason: text(\"reason\").notNull(),\n  owner: text(\"owner\"),\n  eta: timestamp(\"eta\", { withTimezone: true }),\n  active: boolean(\"active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertBlockerSchema = createInsertSchema(blockers).pick({\n  stageId: true,\n  severity: true,\n  reason: true,\n  owner: true,\n  eta: true,\n  active: true,\n});\n\nexport type InsertBlocker = z.infer<typeof insertBlockerSchema>;\nexport type Blocker = typeof blockers.$inferSelect;\n\n// Diagrams\nexport const diagrams = pgTable(\"diagrams\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  releaseId: varchar(\"release_id\").notNull().references(() => releases.id, { onDelete: \"cascade\" }),\n  name: text(\"name\"),\n  layout: jsonb(\"layout\"),\n  ydocSnapshot: jsonb(\"ydoc_snapshot\"),\n  updatedAt: timestamp(\"updated_at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertDiagramSchema = createInsertSchema(diagrams).pick({\n  releaseId: true,\n  name: true,\n  layout: true,\n  ydocSnapshot: true,\n});\n\nexport type InsertDiagram = z.infer<typeof insertDiagramSchema>;\nexport type Diagram = typeof diagrams.$inferSelect;\n\n// Diagram Nodes\nexport const diagramNodes = pgTable(\"diagram_nodes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  diagramId: varchar(\"diagram_id\").notNull().references(() => diagrams.id, { onDelete: \"cascade\" }),\n  key: text(\"key\"),\n  meta: jsonb(\"meta\"),\n});\n\nexport const insertDiagramNodeSchema = createInsertSchema(diagramNodes).pick({\n  diagramId: true,\n  key: true,\n  meta: true,\n});\n\nexport type InsertDiagramNode = z.infer<typeof insertDiagramNodeSchema>;\nexport type DiagramNode = typeof diagramNodes.$inferSelect;\n\n// Activity Log\nexport const activityLog = pgTable(\"activity_log\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  workspaceId: varchar(\"workspace_id\").references(() => workspaces.id, { onDelete: \"cascade\" }),\n  releaseId: varchar(\"release_id\").references(() => releases.id, { onDelete: \"set null\" }),\n  stageId: varchar(\"stage_id\").references(() => stages.id, { onDelete: \"set null\" }),\n  actor: text(\"actor\"),\n  action: text(\"action\").notNull(),\n  meta: jsonb(\"meta\"),\n  at: timestamp(\"at\", { withTimezone: true }).defaultNow().notNull(),\n});\n\nexport const insertActivityLogSchema = createInsertSchema(activityLog).pick({\n  workspaceId: true,\n  releaseId: true,\n  stageId: true,\n  actor: true,\n  action: true,\n  meta: true,\n});\n\nexport type InsertActivityLog = z.infer<typeof insertActivityLogSchema>;\nexport type ActivityLog = typeof activityLog.$inferSelect;\n","size_bytes":13128},"client/src/components/examples/TaskCard.tsx":{"content":"import TaskCard from \"../TaskCard\";\n\nexport default function TaskCardExample() {\n  return (\n    <div className=\"w-80 space-y-3\">\n      <TaskCard\n        id=\"1\"\n        title=\"CI green for main branch\"\n        status=\"done\"\n        owner=\"John Doe\"\n        required={true}\n        priority=\"P1\"\n        evidenceCount={2}\n        onClick={() => console.log(\"Task 1 clicked\")}\n      />\n      <TaskCard\n        id=\"2\"\n        title=\"Terraform plan reviewed and attached\"\n        status=\"doing\"\n        owner=\"Jane Smith\"\n        required={true}\n        dueDate=\"Nov 8, 2025\"\n        onClick={() => console.log(\"Task 2 clicked\")}\n      />\n      <TaskCard\n        id=\"3\"\n        title=\"Update documentation\"\n        status=\"todo\"\n        owner=\"Bob Johnson\"\n        onClick={() => console.log(\"Task 3 clicked\")}\n      />\n    </div>\n  );\n}\n","size_bytes":833},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/examples/EnvironmentFlowCanvas.tsx":{"content":"import EnvironmentFlowCanvas from \"../EnvironmentFlowCanvas\";\n\nexport default function EnvironmentFlowCanvasExample() {\n  return (\n    <div className=\"h-screen w-full\">\n      <EnvironmentFlowCanvas\n        onEnvironmentClick={(envId) => console.log(\"Environment clicked:\", envId)}\n      />\n    </div>\n  );\n}\n","size_bytes":308},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"server/storage.ts":{"content":"import { db, pool } from \"./db\";\nimport {\n  type User,\n  type InsertUser,\n  type Workspace,\n  type InsertWorkspace,\n  type WorkspaceMember,\n  type InsertWorkspaceMember,\n  type WorkspaceInvitation,\n  type InsertWorkspaceInvitation,\n  type Team,\n  type InsertTeam,\n  type TeamMember,\n  type InsertTeamMember,\n  type Environment,\n  type InsertEnvironment,\n  type Release,\n  type InsertRelease,\n  type Stage,\n  type InsertStage,\n  type Flow,\n  type InsertFlow,\n  type Task,\n  type InsertTask,\n  type Blocker,\n  type InsertBlocker,\n  type Diagram,\n  type InsertDiagram,\n  type ActivityLog,\n  type InsertActivityLog,\n  users,\n  workspaces,\n  workspaceMembers,\n  workspaceInvitations,\n  teams,\n  teamMembers,\n  environments,\n  releases,\n  stages,\n  flows,\n  tasks,\n  blockers,\n  diagrams,\n  diagramNodes,\n  activityLog,\n} from \"@shared/schema\";\nimport { eq, and, desc } from \"drizzle-orm\";\nimport session from \"express-session\";\nimport connectPg from \"connect-pg-simple\";\n\nconst PostgresSessionStore = connectPg(session);\n\nexport interface IStorage {\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n\n  // Workspaces\n  getWorkspace(id: string): Promise<Workspace | undefined>;\n  getWorkspaceBySlug(slug: string): Promise<Workspace | undefined>;\n  getWorkspacesByUser(userId: string): Promise<Workspace[]>;\n  createWorkspace(workspace: InsertWorkspace): Promise<Workspace>;\n  updateWorkspace(id: string, data: Partial<InsertWorkspace>): Promise<Workspace | undefined>;\n  deleteWorkspace(id: string): Promise<boolean>;\n\n  // Workspace Members\n  getWorkspaceMember(id: string): Promise<WorkspaceMember | undefined>;\n  getWorkspaceMemberByUserAndWorkspace(userId: string, workspaceId: string): Promise<WorkspaceMember | undefined>;\n  getWorkspaceMembers(workspaceId: string): Promise<WorkspaceMember[]>;\n  createWorkspaceMember(member: InsertWorkspaceMember): Promise<WorkspaceMember>;\n  updateWorkspaceMember(id: string, data: Partial<InsertWorkspaceMember>): Promise<WorkspaceMember | undefined>;\n  deleteWorkspaceMember(id: string): Promise<boolean>;\n\n  // Workspace Invitations\n  getWorkspaceInvitation(id: string): Promise<WorkspaceInvitation | undefined>;\n  getWorkspaceInvitationByToken(token: string): Promise<WorkspaceInvitation | undefined>;\n  getWorkspaceInvitations(workspaceId: string): Promise<WorkspaceInvitation[]>;\n  createWorkspaceInvitation(invitation: InsertWorkspaceInvitation & { token: string }): Promise<WorkspaceInvitation>;\n  updateWorkspaceInvitation(id: string, data: Partial<WorkspaceInvitation>): Promise<WorkspaceInvitation | undefined>;\n  deleteWorkspaceInvitation(id: string): Promise<boolean>;\n\n  // Teams\n  getTeam(id: string): Promise<Team | undefined>;\n  getTeamsByWorkspace(workspaceId: string): Promise<Team[]>;\n  createTeam(team: InsertTeam): Promise<Team>;\n  updateTeam(id: string, data: Partial<InsertTeam>): Promise<Team | undefined>;\n  deleteTeam(id: string): Promise<boolean>;\n\n  // Team Members\n  getTeamMember(id: string): Promise<TeamMember | undefined>;\n  getTeamMembers(teamId: string): Promise<TeamMember[]>;\n  createTeamMember(member: InsertTeamMember): Promise<TeamMember>;\n  updateTeamMember(id: string, data: Partial<InsertTeamMember>): Promise<TeamMember | undefined>;\n  deleteTeamMember(id: string): Promise<boolean>;\n\n  // Environments\n  getEnvironment(id: string): Promise<Environment | undefined>;\n  getEnvironmentsByTeam(teamId: string): Promise<Environment[]>;\n  createEnvironment(environment: InsertEnvironment): Promise<Environment>;\n  updateEnvironment(id: string, data: Partial<InsertEnvironment>): Promise<Environment | undefined>;\n  deleteEnvironment(id: string): Promise<boolean>;\n\n  // Releases\n  getReleases(filters?: { teamId?: string }): Promise<Release[]>;\n  getRelease(id: string): Promise<Release | undefined>;\n  createRelease(release: InsertRelease): Promise<Release>;\n  updateRelease(id: string, data: Partial<InsertRelease>): Promise<Release | undefined>;\n  deleteRelease(id: string): Promise<boolean>;\n\n  // Stages\n  getStagesByRelease(releaseId: string): Promise<Stage[]>;\n  getStage(id: string): Promise<Stage | undefined>;\n  createStage(stage: InsertStage): Promise<Stage>;\n  updateStage(id: string, data: Partial<InsertStage>): Promise<Stage | undefined>;\n  deleteStage(id: string): Promise<boolean>;\n\n  // Flows\n  getFlowsByStage(stageId: string): Promise<Flow[]>;\n  getFlow(id: string): Promise<Flow | undefined>;\n  createFlow(flow: InsertFlow): Promise<Flow>;\n  updateFlow(id: string, data: Partial<InsertFlow>): Promise<Flow | undefined>;\n  deleteFlow(id: string): Promise<boolean>;\n\n  // Tasks\n  getTasksByStage(stageId: string): Promise<Task[]>;\n  getTask(id: string): Promise<Task | undefined>;\n  createTask(task: InsertTask): Promise<Task>;\n  updateTask(id: string, data: Partial<InsertTask>): Promise<Task | undefined>;\n  deleteTask(id: string): Promise<boolean>;\n\n  // Blockers\n  getBlockersByStage(stageId: string, activeOnly?: boolean): Promise<Blocker[]>;\n  getBlocker(id: string): Promise<Blocker | undefined>;\n  createBlocker(blocker: InsertBlocker): Promise<Blocker>;\n  updateBlocker(id: string, data: Partial<InsertBlocker>): Promise<Blocker | undefined>;\n  deleteBlocker(id: string): Promise<boolean>;\n\n  // Diagrams\n  getDiagramByRelease(releaseId: string): Promise<Diagram | undefined>;\n  createOrUpdateDiagram(diagram: InsertDiagram): Promise<Diagram>;\n  updateDiagramLayout(releaseId: string, layout: any): Promise<Diagram | undefined>;\n\n  // Activity Log\n  getActivityLog(filters?: { workspaceId?: string; releaseId?: string; stageId?: string }): Promise<ActivityLog[]>;\n  createActivityLog(log: InsertActivityLog): Promise<ActivityLog>;\n\n  // Session Store\n  sessionStore: session.Store;\n}\n\nclass DatabaseStorage implements IStorage {\n  sessionStore: session.Store;\n\n  constructor() {\n    this.sessionStore = new PostgresSessionStore({ pool, createTableIfMissing: true });\n  }\n\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.username, username)).limit(1);\n    return result[0];\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email)).limit(1);\n    return result[0];\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const result = await db.insert(users).values(user).returning();\n    return result[0];\n  }\n\n  // Workspaces\n  async getWorkspace(id: string): Promise<Workspace | undefined> {\n    const result = await db.select().from(workspaces).where(eq(workspaces.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getWorkspaceBySlug(slug: string): Promise<Workspace | undefined> {\n    const result = await db.select().from(workspaces).where(eq(workspaces.slug, slug)).limit(1);\n    return result[0];\n  }\n\n  async getWorkspacesByUser(userId: string): Promise<Workspace[]> {\n    const result = await db\n      .select({ workspace: workspaces })\n      .from(workspaces)\n      .innerJoin(workspaceMembers, eq(workspaces.id, workspaceMembers.workspaceId))\n      .where(eq(workspaceMembers.userId, userId));\n    return result.map(r => r.workspace);\n  }\n\n  async createWorkspace(workspace: InsertWorkspace): Promise<Workspace> {\n    const result = await db.insert(workspaces).values(workspace).returning();\n    return result[0];\n  }\n\n  async updateWorkspace(id: string, data: Partial<InsertWorkspace>): Promise<Workspace | undefined> {\n    const result = await db.update(workspaces).set(data).where(eq(workspaces.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteWorkspace(id: string): Promise<boolean> {\n    const result = await db.delete(workspaces).where(eq(workspaces.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Workspace Members\n  async getWorkspaceMember(id: string): Promise<WorkspaceMember | undefined> {\n    const result = await db.select().from(workspaceMembers).where(eq(workspaceMembers.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getWorkspaceMemberByUserAndWorkspace(userId: string, workspaceId: string): Promise<WorkspaceMember | undefined> {\n    const result = await db\n      .select()\n      .from(workspaceMembers)\n      .where(and(eq(workspaceMembers.userId, userId), eq(workspaceMembers.workspaceId, workspaceId)))\n      .limit(1);\n    return result[0];\n  }\n\n  async getWorkspaceMembers(workspaceId: string): Promise<WorkspaceMember[]> {\n    return await db.select().from(workspaceMembers).where(eq(workspaceMembers.workspaceId, workspaceId));\n  }\n\n  async createWorkspaceMember(member: InsertWorkspaceMember): Promise<WorkspaceMember> {\n    const result = await db.insert(workspaceMembers).values(member).returning();\n    return result[0];\n  }\n\n  async updateWorkspaceMember(id: string, data: Partial<InsertWorkspaceMember>): Promise<WorkspaceMember | undefined> {\n    const result = await db.update(workspaceMembers).set(data).where(eq(workspaceMembers.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteWorkspaceMember(id: string): Promise<boolean> {\n    const result = await db.delete(workspaceMembers).where(eq(workspaceMembers.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Workspace Invitations\n  async getWorkspaceInvitation(id: string): Promise<WorkspaceInvitation | undefined> {\n    const result = await db.select().from(workspaceInvitations).where(eq(workspaceInvitations.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getWorkspaceInvitationByToken(token: string): Promise<WorkspaceInvitation | undefined> {\n    const result = await db.select().from(workspaceInvitations).where(eq(workspaceInvitations.token, token)).limit(1);\n    return result[0];\n  }\n\n  async getWorkspaceInvitations(workspaceId: string): Promise<WorkspaceInvitation[]> {\n    return await db.select().from(workspaceInvitations).where(eq(workspaceInvitations.workspaceId, workspaceId));\n  }\n\n  async createWorkspaceInvitation(invitation: InsertWorkspaceInvitation & { token: string }): Promise<WorkspaceInvitation> {\n    const result = await db.insert(workspaceInvitations).values(invitation).returning();\n    return result[0];\n  }\n\n  async updateWorkspaceInvitation(id: string, data: Partial<WorkspaceInvitation>): Promise<WorkspaceInvitation | undefined> {\n    const result = await db.update(workspaceInvitations).set(data).where(eq(workspaceInvitations.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteWorkspaceInvitation(id: string): Promise<boolean> {\n    const result = await db.delete(workspaceInvitations).where(eq(workspaceInvitations.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Teams\n  async getTeam(id: string): Promise<Team | undefined> {\n    const result = await db.select().from(teams).where(eq(teams.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getTeamsByWorkspace(workspaceId: string): Promise<Team[]> {\n    return await db.select().from(teams).where(eq(teams.workspaceId, workspaceId));\n  }\n\n  async createTeam(team: InsertTeam): Promise<Team> {\n    const result = await db.insert(teams).values(team).returning();\n    return result[0];\n  }\n\n  async updateTeam(id: string, data: Partial<InsertTeam>): Promise<Team | undefined> {\n    const result = await db.update(teams).set(data).where(eq(teams.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteTeam(id: string): Promise<boolean> {\n    const result = await db.delete(teams).where(eq(teams.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Team Members\n  async getTeamMember(id: string): Promise<TeamMember | undefined> {\n    const result = await db.select().from(teamMembers).where(eq(teamMembers.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getTeamMembers(teamId: string): Promise<TeamMember[]> {\n    return await db.select().from(teamMembers).where(eq(teamMembers.teamId, teamId));\n  }\n\n  async createTeamMember(member: InsertTeamMember): Promise<TeamMember> {\n    const result = await db.insert(teamMembers).values(member).returning();\n    return result[0];\n  }\n\n  async updateTeamMember(id: string, data: Partial<InsertTeamMember>): Promise<TeamMember | undefined> {\n    const result = await db.update(teamMembers).set(data).where(eq(teamMembers.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteTeamMember(id: string): Promise<boolean> {\n    const result = await db.delete(teamMembers).where(eq(teamMembers.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Environments\n  async getEnvironment(id: string): Promise<Environment | undefined> {\n    const result = await db.select().from(environments).where(eq(environments.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getEnvironmentsByTeam(teamId: string): Promise<Environment[]> {\n    return await db.select().from(environments).where(eq(environments.teamId, teamId));\n  }\n\n  async createEnvironment(environment: InsertEnvironment): Promise<Environment> {\n    const result = await db.insert(environments).values(environment).returning();\n    return result[0];\n  }\n\n  async updateEnvironment(id: string, data: Partial<InsertEnvironment>): Promise<Environment | undefined> {\n    const result = await db.update(environments).set(data).where(eq(environments.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteEnvironment(id: string): Promise<boolean> {\n    const result = await db.delete(environments).where(eq(environments.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Releases\n  async getReleases(filters?: { teamId?: string }): Promise<Release[]> {\n    const conditions = [];\n    if (filters?.teamId) {\n      conditions.push(eq(releases.teamId, filters.teamId));\n    }\n    \n    if (conditions.length > 0) {\n      return await db.select().from(releases).where(and(...conditions)).orderBy(desc(releases.createdAt));\n    }\n    \n    return await db.select().from(releases).orderBy(desc(releases.createdAt));\n  }\n\n  async getRelease(id: string): Promise<Release | undefined> {\n    const result = await db.select().from(releases).where(eq(releases.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createRelease(release: InsertRelease): Promise<Release> {\n    const result = await db.insert(releases).values(release).returning();\n    return result[0];\n  }\n\n  async updateRelease(id: string, data: Partial<InsertRelease>): Promise<Release | undefined> {\n    const result = await db.update(releases).set(data).where(eq(releases.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteRelease(id: string): Promise<boolean> {\n    const result = await db.delete(releases).where(eq(releases.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Stages\n  async getStagesByRelease(releaseId: string): Promise<Stage[]> {\n    return await db.select().from(stages).where(eq(stages.releaseId, releaseId));\n  }\n\n  async getStage(id: string): Promise<Stage | undefined> {\n    const result = await db.select().from(stages).where(eq(stages.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createStage(stage: InsertStage): Promise<Stage> {\n    const result = await db.insert(stages).values(stage).returning();\n    return result[0];\n  }\n\n  async updateStage(id: string, data: Partial<InsertStage>): Promise<Stage | undefined> {\n    const result = await db.update(stages).set(data).where(eq(stages.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteStage(id: string): Promise<boolean> {\n    const result = await db.delete(stages).where(eq(stages.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Flows\n  async getFlowsByStage(stageId: string): Promise<Flow[]> {\n    return await db.select().from(flows).where(eq(flows.stageId, stageId));\n  }\n\n  async getFlow(id: string): Promise<Flow | undefined> {\n    const result = await db.select().from(flows).where(eq(flows.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createFlow(flow: InsertFlow): Promise<Flow> {\n    const result = await db.insert(flows).values(flow).returning();\n    return result[0];\n  }\n\n  async updateFlow(id: string, data: Partial<InsertFlow>): Promise<Flow | undefined> {\n    const result = await db.update(flows).set(data).where(eq(flows.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteFlow(id: string): Promise<boolean> {\n    const result = await db.delete(flows).where(eq(flows.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Tasks\n  async getTasksByStage(stageId: string): Promise<Task[]> {\n    return await db.select().from(tasks).where(eq(tasks.stageId, stageId)).orderBy(tasks.updatedAt);\n  }\n\n  async getTask(id: string): Promise<Task | undefined> {\n    const result = await db.select().from(tasks).where(eq(tasks.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createTask(task: InsertTask): Promise<Task> {\n    const result = await db.insert(tasks).values(task).returning();\n    return result[0];\n  }\n\n  async updateTask(id: string, data: Partial<InsertTask>): Promise<Task | undefined> {\n    const result = await db.update(tasks).set(data).where(eq(tasks.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteTask(id: string): Promise<boolean> {\n    const result = await db.delete(tasks).where(eq(tasks.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Blockers\n  async getBlockersByStage(stageId: string, activeOnly: boolean = false): Promise<Blocker[]> {\n    const conditions = [eq(blockers.stageId, stageId)];\n    \n    if (activeOnly) {\n      conditions.push(eq(blockers.active, true));\n    }\n    \n    return await db.select().from(blockers).where(and(...conditions)).orderBy(desc(blockers.createdAt));\n  }\n\n  async getBlocker(id: string): Promise<Blocker | undefined> {\n    const result = await db.select().from(blockers).where(eq(blockers.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createBlocker(blocker: InsertBlocker): Promise<Blocker> {\n    const result = await db.insert(blockers).values(blocker).returning();\n    return result[0];\n  }\n\n  async updateBlocker(id: string, data: Partial<InsertBlocker>): Promise<Blocker | undefined> {\n    const result = await db.update(blockers).set(data).where(eq(blockers.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteBlocker(id: string): Promise<boolean> {\n    const result = await db.delete(blockers).where(eq(blockers.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Diagrams\n  async getDiagramByRelease(releaseId: string): Promise<Diagram | undefined> {\n    const result = await db.select().from(diagrams).where(eq(diagrams.releaseId, releaseId)).limit(1);\n    return result[0];\n  }\n\n  async createOrUpdateDiagram(diagram: InsertDiagram): Promise<Diagram> {\n    const existing = await this.getDiagramByRelease(diagram.releaseId!);\n    \n    if (existing) {\n      const result = await db.update(diagrams).set(diagram).where(eq(diagrams.id, existing.id)).returning();\n      return result[0];\n    } else {\n      const result = await db.insert(diagrams).values(diagram).returning();\n      return result[0];\n    }\n  }\n\n  async updateDiagramLayout(releaseId: string, layout: any): Promise<Diagram | undefined> {\n    const existing = await this.getDiagramByRelease(releaseId);\n    \n    if (existing) {\n      const result = await db.update(diagrams).set({ layout }).where(eq(diagrams.id, existing.id)).returning();\n      return result[0];\n    } else {\n      const result = await db.insert(diagrams).values({ releaseId, layout }).returning();\n      return result[0];\n    }\n  }\n\n  // Activity Log\n  async getActivityLog(filters?: { workspaceId?: string; releaseId?: string; stageId?: string }): Promise<ActivityLog[]> {\n    const conditions = [];\n    if (filters?.workspaceId) {\n      conditions.push(eq(activityLog.workspaceId, filters.workspaceId));\n    }\n    if (filters?.releaseId) {\n      conditions.push(eq(activityLog.releaseId, filters.releaseId));\n    }\n    if (filters?.stageId) {\n      conditions.push(eq(activityLog.stageId, filters.stageId));\n    }\n    \n    if (conditions.length > 0) {\n      return await db.select().from(activityLog).where(and(...conditions)).orderBy(desc(activityLog.at)).limit(100);\n    }\n    \n    return await db.select().from(activityLog).orderBy(desc(activityLog.at)).limit(100);\n  }\n\n  async createActivityLog(log: InsertActivityLog): Promise<ActivityLog> {\n    const result = await db.insert(activityLog).values(log).returning();\n    return result[0];\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":20666},"client/src/components/ReleaseListPanel.tsx":{"content":"import { useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Search, Trash2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport ReleaseCard from \"./ReleaseCard\";\nimport CreateReleaseDialog from \"./CreateReleaseDialog\";\nimport { useReleases, useCreateRelease, useDeleteRelease } from \"@/hooks/useReleases\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface ReleaseListPanelProps {\n  projectId: string;\n  onReleaseClick?: (releaseId: string) => void;\n}\n\ntype FilterStatus = \"all\" | \"ongoing\" | \"finished\" | \"failed\";\n\nexport default function ReleaseListPanel({ projectId, onReleaseClick }: ReleaseListPanelProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<FilterStatus>(\"all\");\n  const { data: releases = [], isLoading } = useReleases(projectId);\n  const createRelease = useCreateRelease();\n  const deleteRelease = useDeleteRelease();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [releaseToDelete, setReleaseToDelete] = useState<string | null>(null);\n  \n  const filteredReleases = releases.filter((release: any) => {\n    const matchesSearch = \n      release.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      release.version?.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    if (!matchesSearch) return false;\n    \n    if (statusFilter === \"all\") return true;\n    \n    const releaseStatus = getReleaseStatus(release);\n    return releaseStatus === statusFilter;\n  });\n  \n  function getReleaseStatus(release: any): FilterStatus {\n    if (!release.stages || release.stages.length === 0) return \"ongoing\";\n    \n    const hasBlockers = release.stages.some((s: any) => \n      s.status === \"blocked\" || (s.blockers && s.blockers.some((b: any) => b.active))\n    );\n    \n    if (hasBlockers) return \"failed\";\n    \n    const allDone = release.stages.every((s: any) => s.status === \"done\");\n    if (allDone) return \"finished\";\n    \n    return \"ongoing\";\n  }\n  \n  const handleCreateRelease = async (data: { name: string; version: string; team: string }) => {\n    await createRelease.mutateAsync({\n      name: data.name,\n      version: data.version,\n      teamId: projectId, // Use the projectId from props, changed to teamId\n      createdBy: user?.username || \"system\",\n    });\n  };\n\n  const handleDeleteClick = (e: React.MouseEvent, releaseId: string) => {\n    e.stopPropagation();\n    setReleaseToDelete(releaseId);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!releaseToDelete) return;\n    try {\n      await deleteRelease.mutateAsync(releaseToDelete);\n      toast({\n        title: \"Voyage deleted\",\n        description: \"The voyage has been successfully deleted.\",\n      });\n      setDeleteDialogOpen(false);\n      setReleaseToDelete(null);\n    } catch (error: any) {\n      toast({\n        title: \"Failed to delete voyage\",\n        description: error.message || \"Please try again\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const filterButtons: { label: string; value: FilterStatus }[] = [\n    { label: \"All\", value: \"all\" },\n    { label: \"Ongoing\", value: \"ongoing\" },\n    { label: \"Finished\", value: \"finished\" },\n    { label: \"Failed\", value: \"failed\" },\n  ];\n\n  return (\n    <div className=\"w-80 h-full border-r bg-card flex flex-col\">\n      <div className=\"p-4 border-b space-y-4\">\n        <h2 className=\"text-lg font-semibold\">Active Voyages</h2>\n        <CreateReleaseDialog\n          onCreateRelease={handleCreateRelease}\n        />\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search releases...\"\n            className=\"pl-9\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            data-testid=\"input-search-releases\"\n          />\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          {filterButtons.map((btn) => (\n            <Button\n              key={btn.value}\n              variant={statusFilter === btn.value ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setStatusFilter(btn.value)}\n              data-testid={`button-filter-${btn.value}`}\n              className=\"flex-1\"\n            >\n              {btn.label}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {isLoading ? (\n          <div className=\"text-center text-muted-foreground py-8\">Loading releases...</div>\n        ) : filteredReleases.length === 0 ? (\n          <div className=\"text-center text-muted-foreground py-8\">\n            {searchQuery ? \"No releases found\" : \"No releases yet. Create one to get started!\"}\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {filteredReleases.map((release) => (\n              <div key={release.id} className=\"relative group\">\n                <ReleaseCard\n                  id={release.id}\n                  name={release.name}\n                  version={release.version || \"No version\"}\n                  status={release.status || \"not_started\"}\n                  progress={release.progress || 0}\n                  updatedAt={release.createdAt ? formatDistanceToNow(new Date(release.createdAt), { addSuffix: true }) : \"Unknown\"}\n                  onClick={() => onReleaseClick?.(release.id)}\n                />\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6\"\n                  onClick={(e) => handleDeleteClick(e, release.id)}\n                  data-testid={`delete-release-${release.id}`}\n                >\n                  <Trash2 className=\"h-3 w-3 text-destructive\" />\n                </Button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Voyage?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This action cannot be undone. This will permanently delete the voyage\n              and all its stages, tasks, and associated data.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDeleteConfirm}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              disabled={deleteRelease.isPending}\n            >\n              {deleteRelease.isPending ? \"Deleting...\" : \"Delete\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7408},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"attached_assets/content-1762538950483.md":{"content":"[Skip to content](https://github.com/karthikrishna24/prodflow-poc#start-of-content)\n\nYou signed in with another tab or window. [Reload](https://github.com/karthikrishna24/prodflow-poc) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/karthikrishna24/prodflow-poc) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/karthikrishna24/prodflow-poc) to refresh your session.Dismiss alert\n\n{{ message }}\n\n[karthikrishna24](https://github.com/karthikrishna24)/ **[prodflow-poc](https://github.com/karthikrishna24/prodflow-poc)** Public\n\n- [Notifications](https://github.com/login?return_to=%2Fkarthikrishna24%2Fprodflow-poc) You must be signed in to change notification settings\n- [Fork\\\\\n0](https://github.com/login?return_to=%2Fkarthikrishna24%2Fprodflow-poc)\n- [Star\\\\\n0](https://github.com/login?return_to=%2Fkarthikrishna24%2Fprodflow-poc)\n\n\n[0\\\\\nstars](https://github.com/karthikrishna24/prodflow-poc/stargazers) [0\\\\\nforks](https://github.com/karthikrishna24/prodflow-poc/forks) [Branches](https://github.com/karthikrishna24/prodflow-poc/branches) [Tags](https://github.com/karthikrishna24/prodflow-poc/tags) [Activity](https://github.com/karthikrishna24/prodflow-poc/activity)\n\n[Star](https://github.com/login?return_to=%2Fkarthikrishna24%2Fprodflow-poc)\n\n[Notifications](https://github.com/login?return_to=%2Fkarthikrishna24%2Fprodflow-poc) You must be signed in to change notification settings\n\n# karthikrishna24/prodflow-poc\n\nmain\n\n[**1** Branch](https://github.com/karthikrishna24/prodflow-poc/branches) [**0** Tags](https://github.com/karthikrishna24/prodflow-poc/tags)\n\n[Go to Branches page](https://github.com/karthikrishna24/prodflow-poc/branches)[Go to Tags page](https://github.com/karthikrishna24/prodflow-poc/tags)\n\nGo to file\n\nCode\n\nOpen more actions menu\n\n## Folders and files\n\n| Name | Name | Last commit message | Last commit date |\n| --- | --- | --- | --- |\n| ## Latest commit<br>[![karthikrishna-roni](https://avatars.githubusercontent.com/u/154065375?v=4&size=40)](https://github.com/karthikrishna-roni)[karthikrishna-roni](https://github.com/karthikrishna24/prodflow-poc/commits?author=karthikrishna-roni)<br>[2nd cmt](https://github.com/karthikrishna24/prodflow-poc/commit/05bde4c169b1a7ea9a04a920c392e692d992ca7a)<br>14 minutes agoNov 7, 2025<br>[05bde4c](https://github.com/karthikrishna24/prodflow-poc/commit/05bde4c169b1a7ea9a04a920c392e692d992ca7a) · 14 minutes agoNov 7, 2025<br>## History<br>[11 Commits](https://github.com/karthikrishna24/prodflow-poc/commits/main/) <br>Open commit details<br>[View commit history for this file.](https://github.com/karthikrishna24/prodflow-poc/commits/main/) |\n| [.local/state/replit/agent](https://github.com/karthikrishna24/prodflow-poc/tree/main/.local/state/replit/agent \"This path skips through empty directories\") | [.local/state/replit/agent](https://github.com/karthikrishna24/prodflow-poc/tree/main/.local/state/replit/agent \"This path skips through empty directories\") | [2nd cmt](https://github.com/karthikrishna24/prodflow-poc/commit/05bde4c169b1a7ea9a04a920c392e692d992ca7a \"2nd cmt\") | 14 minutes agoNov 7, 2025 |\n| [attached\\_assets](https://github.com/karthikrishna24/prodflow-poc/tree/main/attached_assets \"attached_assets\") | [attached\\_assets](https://github.com/karthikrishna24/prodflow-poc/tree/main/attached_assets \"attached_assets\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [client](https://github.com/karthikrishna24/prodflow-poc/tree/main/client \"client\") | [client](https://github.com/karthikrishna24/prodflow-poc/tree/main/client \"client\") | [Add authentication and authorization system for secure user access](https://github.com/karthikrishna24/prodflow-poc/commit/34867c624641fd2698cfa26197373cd306540e7b \"Add authentication and authorization system for secure user access  Implement user authentication, registration, and logout endpoints. Protect routes with authentication middleware. Update UI elements and styling to reflect user login status. Enhance release filtering and renaming features.  Replit-Commit-Author: Agent Replit-Commit-Session-Id: da399ecd-4604-4f37-8bf0-5ded8af9fd5a Replit-Commit-Checkpoint-Type: intermediate_checkpoint Replit-Commit-Event-Id: 36a8cc04-9b76-4cb1-a1b3-4e223805bd47 Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/025a7067-9e78-414e-bc06-bf5b027e47d9/da399ecd-4604-4f37-8bf0-5ded8af9fd5a/tCasKPg\") | 2 hours agoNov 7, 2025 |\n| [scripts](https://github.com/karthikrishna24/prodflow-poc/tree/main/scripts \"scripts\") | [scripts](https://github.com/karthikrishna24/prodflow-poc/tree/main/scripts \"scripts\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [server](https://github.com/karthikrishna24/prodflow-poc/tree/main/server \"server\") | [server](https://github.com/karthikrishna24/prodflow-poc/tree/main/server \"server\") | [Add authentication and authorization system for secure user access](https://github.com/karthikrishna24/prodflow-poc/commit/34867c624641fd2698cfa26197373cd306540e7b \"Add authentication and authorization system for secure user access  Implement user authentication, registration, and logout endpoints. Protect routes with authentication middleware. Update UI elements and styling to reflect user login status. Enhance release filtering and renaming features.  Replit-Commit-Author: Agent Replit-Commit-Session-Id: da399ecd-4604-4f37-8bf0-5ded8af9fd5a Replit-Commit-Checkpoint-Type: intermediate_checkpoint Replit-Commit-Event-Id: 36a8cc04-9b76-4cb1-a1b3-4e223805bd47 Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/025a7067-9e78-414e-bc06-bf5b027e47d9/da399ecd-4604-4f37-8bf0-5ded8af9fd5a/tCasKPg\") | 2 hours agoNov 7, 2025 |\n| [shared](https://github.com/karthikrishna24/prodflow-poc/tree/main/shared \"shared\") | [shared](https://github.com/karthikrishna24/prodflow-poc/tree/main/shared \"shared\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [.env](https://github.com/karthikrishna24/prodflow-poc/blob/main/.env \".env\") | [.env](https://github.com/karthikrishna24/prodflow-poc/blob/main/.env \".env\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [.gitignore](https://github.com/karthikrishna24/prodflow-poc/blob/main/.gitignore \".gitignore\") | [.gitignore](https://github.com/karthikrishna24/prodflow-poc/blob/main/.gitignore \".gitignore\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [.replit](https://github.com/karthikrishna24/prodflow-poc/blob/main/.replit \".replit\") | [.replit](https://github.com/karthikrishna24/prodflow-poc/blob/main/.replit \".replit\") | [Saved your changes before starting work](https://github.com/karthikrishna24/prodflow-poc/commit/ff680db1ae4631685b7f8ea4eb24f49e4d684025 \"Saved your changes before starting work  Replit-Commit-Author: Agent Replit-Commit-Session-Id: e69c7687-aaa6-459a-90ac-4a66a8da2e34 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Event-Id: ae2f2482-cf94-4814-ab42-e794c5a06325\") | 33 minutes agoNov 7, 2025 |\n| [README.md](https://github.com/karthikrishna24/prodflow-poc/blob/main/README.md \"README.md\") | [README.md](https://github.com/karthikrishna24/prodflow-poc/blob/main/README.md \"README.md\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [components.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/components.json \"components.json\") | [components.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/components.json \"components.json\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [design\\_guidelines.md](https://github.com/karthikrishna24/prodflow-poc/blob/main/design_guidelines.md \"design_guidelines.md\") | [design\\_guidelines.md](https://github.com/karthikrishna24/prodflow-poc/blob/main/design_guidelines.md \"design_guidelines.md\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [drizzle.config.ts](https://github.com/karthikrishna24/prodflow-poc/blob/main/drizzle.config.ts \"drizzle.config.ts\") | [drizzle.config.ts](https://github.com/karthikrishna24/prodflow-poc/blob/main/drizzle.config.ts \"drizzle.config.ts\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [package-lock.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/package-lock.json \"package-lock.json\") | [package-lock.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/package-lock.json \"package-lock.json\") | [Add new tools for handling sensitive information securely](https://github.com/karthikrishna24/prodflow-poc/commit/b82efd39e3e846fe8d808746fb52373121afd160 \"Add new tools for handling sensitive information securely  Adds bcrypt for password hashing to package.json.  Replit-Commit-Author: Agent Replit-Commit-Session-Id: da399ecd-4604-4f37-8bf0-5ded8af9fd5a Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Event-Id: 9cbf0627-8245-4b35-bf78-b88c7efd805c Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/025a7067-9e78-414e-bc06-bf5b027e47d9/da399ecd-4604-4f37-8bf0-5ded8af9fd5a/AJzXzPr\") | 3 hours agoNov 7, 2025 |\n| [package.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/package.json \"package.json\") | [package.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/package.json \"package.json\") | [Add new tools for handling sensitive information securely](https://github.com/karthikrishna24/prodflow-poc/commit/b82efd39e3e846fe8d808746fb52373121afd160 \"Add new tools for handling sensitive information securely  Adds bcrypt for password hashing to package.json.  Replit-Commit-Author: Agent Replit-Commit-Session-Id: da399ecd-4604-4f37-8bf0-5ded8af9fd5a Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Event-Id: 9cbf0627-8245-4b35-bf78-b88c7efd805c Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/025a7067-9e78-414e-bc06-bf5b027e47d9/da399ecd-4604-4f37-8bf0-5ded8af9fd5a/AJzXzPr\") | 3 hours agoNov 7, 2025 |\n| [postcss.config.js](https://github.com/karthikrishna24/prodflow-poc/blob/main/postcss.config.js \"postcss.config.js\") | [postcss.config.js](https://github.com/karthikrishna24/prodflow-poc/blob/main/postcss.config.js \"postcss.config.js\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [replit.md](https://github.com/karthikrishna24/prodflow-poc/blob/main/replit.md \"replit.md\") | [replit.md](https://github.com/karthikrishna24/prodflow-poc/blob/main/replit.md \"replit.md\") | [Add a complete release management dashboard with user authentication …](https://github.com/karthikrishna24/prodflow-poc/commit/73a521f0511e918acaffe348ee0eba86efe571aa \"Add a complete release management dashboard with user authentication and nautical branding  Introduce the Shipyard dashboard with user authentication, release tracking, status filtering, and a nautical theme, replacing emojis with icons and using maritime terminology.  Replit-Commit-Author: Agent Replit-Commit-Session-Id: da399ecd-4604-4f37-8bf0-5ded8af9fd5a Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Event-Id: 765e839d-beff-4fb3-a381-8157e7b584c2 Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/025a7067-9e78-414e-bc06-bf5b027e47d9/da399ecd-4604-4f37-8bf0-5ded8af9fd5a/JWEIvI7\") | 2 hours agoNov 7, 2025 |\n| [tailwind.config.ts](https://github.com/karthikrishna24/prodflow-poc/blob/main/tailwind.config.ts \"tailwind.config.ts\") | [tailwind.config.ts](https://github.com/karthikrishna24/prodflow-poc/blob/main/tailwind.config.ts \"tailwind.config.ts\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [tsconfig.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/tsconfig.json \"tsconfig.json\") | [tsconfig.json](https://github.com/karthikrishna24/prodflow-poc/blob/main/tsconfig.json \"tsconfig.json\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| [vite.config.ts](https://github.com/karthikrishna24/prodflow-poc/blob/main/vite.config.ts \"vite.config.ts\") | [vite.config.ts](https://github.com/karthikrishna24/prodflow-poc/blob/main/vite.config.ts \"vite.config.ts\") | [init](https://github.com/karthikrishna24/prodflow-poc/commit/e3ef5e0e80d041ab2e1286e2a1e1b31501ce0153 \"init\") | 5 hours agoNov 7, 2025 |\n| View all files |\n\n## Repository files navigation\n\n# ReleaseStream - Release Management Dashboard\n\n[Permalink: ReleaseStream - Release Management Dashboard](https://github.com/karthikrishna24/prodflow-poc#releasestream---release-management-dashboard)\n\nA collaborative, editable flow dashboard for managing software releases across environments.\n\n## Prerequisites\n\n[Permalink: Prerequisites](https://github.com/karthikrishna24/prodflow-poc#prerequisites)\n\n- Node.js (v20 or higher)\n- PostgreSQL database (or Neon Database connection string)\n- npm or yarn\n\n## Setup Instructions\n\n[Permalink: Setup Instructions](https://github.com/karthikrishna24/prodflow-poc#setup-instructions)\n\n### 1\\. Install Dependencies\n\n[Permalink: 1. Install Dependencies](https://github.com/karthikrishna24/prodflow-poc#1-install-dependencies)\n\n```\nnpm install\n```\n\n### 2\\. Configure Database\n\n[Permalink: 2. Configure Database](https://github.com/karthikrishna24/prodflow-poc#2-configure-database)\n\nYou need to set up a `DATABASE_URL` environment variable. The app uses Neon Database (PostgreSQL).\n\n**Option A: Using a `.env` file (Recommended for local development)**\n\nCreate a `.env` file in the root directory:\n\n```\nDATABASE_URL=postgresql://user:password@host:port/database\n```\n\n**Option B: Set environment variable directly**\n\n- **Windows PowerShell:**\n\n\n\n```\n$env:DATABASE_URL=\"postgresql://user:password@host:port/database\"\n```\n\n- **Windows CMD:**\n\n\n\n```\nset DATABASE_URL=postgresql://user:password@host:port/database\n```\n\n- **Linux/Mac:**\n\n\n\n```\nexport DATABASE_URL=\"postgresql://user:password@host:port/database\"\n```\n\n\n### 3\\. Initialize Database Schema\n\n[Permalink: 3. Initialize Database Schema](https://github.com/karthikrishna24/prodflow-poc#3-initialize-database-schema)\n\nRun the database migrations:\n\n```\nnpm run db:push\n```\n\n### 4\\. Start the Development Server\n\n[Permalink: 4. Start the Development Server](https://github.com/karthikrishna24/prodflow-poc#4-start-the-development-server)\n\n```\nnpm run dev\n```\n\nThe application will start on **port 5000** (or the port specified in the `PORT` environment variable).\n\nOpen your browser and navigate to: `http://localhost:5000`\n\n## Available Scripts\n\n[Permalink: Available Scripts](https://github.com/karthikrishna24/prodflow-poc#available-scripts)\n\n- `npm run dev` \\- Start the development server\n- `npm run build` \\- Build the application for production\n- `npm run start` \\- Start the production server (requires build first)\n- `npm run check` \\- Run TypeScript type checking\n- `npm run db:push` \\- Push database schema changes to the database\n\n## Project Structure\n\n[Permalink: Project Structure](https://github.com/karthikrishna24/prodflow-poc#project-structure)\n\n- `client/` \\- React frontend application\n- `server/` \\- Express backend API\n- `shared/` \\- Shared TypeScript types and schemas\n- `migrations/` \\- Database migration files (generated by Drizzle)\n\n## Environment Variables\n\n[Permalink: Environment Variables](https://github.com/karthikrishna24/prodflow-poc#environment-variables)\n\n- `DATABASE_URL` (required) - PostgreSQL connection string\n- `PORT` (optional) - Server port (default: 5000)\n- `NODE_ENV` \\- Environment mode (development/production)\n\n## Troubleshooting\n\n[Permalink: Troubleshooting](https://github.com/karthikrishna24/prodflow-poc#troubleshooting)\n\n### Database Connection Issues\n\n[Permalink: Database Connection Issues](https://github.com/karthikrishna24/prodflow-poc#database-connection-issues)\n\nIf you see \"DATABASE\\_URL must be set\", make sure you've set the environment variable correctly for your operating system.\n\n### Port Already in Use\n\n[Permalink: Port Already in Use](https://github.com/karthikrishna24/prodflow-poc#port-already-in-use)\n\nIf port 5000 is already in use, set the `PORT` environment variable to a different port:\n\n```\n# Windows PowerShell\n$env:PORT=\"3000\"\nnpm run dev\n\n# Linux/Mac\nPORT=3000 npm run dev\n```\n\n## About\n\nNo description, website, or topics provided.\n\n\n### Resources\n\n[Readme](https://github.com/karthikrishna24/prodflow-poc#readme-ov-file)\n\n### Uh oh!\n\nThere was an error while loading. [Please reload this page](https://github.com/karthikrishna24/prodflow-poc).\n\n[Activity](https://github.com/karthikrishna24/prodflow-poc/activity)\n\n### Stars\n\n[**0**\\\\\nstars](https://github.com/karthikrishna24/prodflow-poc/stargazers)\n\n### Watchers\n\n[**0**\\\\\nwatching](https://github.com/karthikrishna24/prodflow-poc/watchers)\n\n### Forks\n\n[**0**\\\\\nforks](https://github.com/karthikrishna24/prodflow-poc/forks)\n\n[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fkarthikrishna24%2Fprodflow-poc&report=karthikrishna24+%28user%29)\n\n## [Releases](https://github.com/karthikrishna24/prodflow-poc/releases)\n\nNo releases published\n\n## [Packages\\  0](https://github.com/users/karthikrishna24/packages?repo_name=prodflow-poc)\n\nNo packages published\n\n## Languages\n\n- [TypeScript96.3%](https://github.com/karthikrishna24/prodflow-poc/search?l=typescript)\n- [CSS3.4%](https://github.com/karthikrishna24/prodflow-poc/search?l=css)\n- Other0.3%\n\nYou can’t perform that action at this time.","size_bytes":18407},"client/src/components/CreateReleaseDialog.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Ship } from \"lucide-react\";\n\ninterface CreateReleaseDialogProps {\n  onCreateRelease?: (data: { name: string; version: string; team: string }) => void; // team is kept for backward compat but will be mapped to teamId\n}\n\nexport default function CreateReleaseDialog({ onCreateRelease }: CreateReleaseDialogProps) {\n  const [open, setOpen] = useState(false);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    version: \"\",\n    team: \"\", // This will be set by the parent\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onCreateRelease?.(formData);\n    setFormData({ name: \"\", version: \"\", team: \"\" });\n    setOpen(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button className=\"w-full\" data-testid=\"button-create-release\">\n          <Ship className=\"h-4 w-4 mr-2\" />\n          Launch New Voyage\n        </Button>\n      </DialogTrigger>\n      <DialogContent data-testid=\"dialog-create-release\">\n        <form onSubmit={handleSubmit}>\n          <DialogHeader>\n            <DialogTitle>Launch New Voyage</DialogTitle>\n            <DialogDescription>\n              Chart a new deployment journey across your environments\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Voyage Name</Label>\n              <Input\n                id=\"name\"\n                placeholder=\"e.g., Q4 Product Launch\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                required\n                data-testid=\"input-release-name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"version\">Cargo Version</Label>\n              <Input\n                id=\"version\"\n                placeholder=\"e.g., v2.5.0\"\n                value={formData.version}\n                onChange={(e) => setFormData({ ...formData, version: e.target.value })}\n                required\n                data-testid=\"input-version\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)} data-testid=\"button-cancel\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" data-testid=\"button-submit\">\n              Set Sail\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":2918},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"design_guidelines.md":{"content":"# Release Management Dashboard Design Guidelines\n\n## Design Approach\n**Design System:** Material Design 3 with developer tool optimizations (inspired by Linear, GitHub Projects, and Notion)\n- Clean, professional aesthetic for technical users\n- Information-dense layouts with clear hierarchy\n- Functional over decorative elements\n\n## Typography System\n**Font Stack:** Inter (primary), JetBrains Mono (code/IDs)\n\n**Hierarchy:**\n- H1 (Page titles): 32px/2rem, semibold, tracking-tight\n- H2 (Section headers): 24px/1.5rem, semibold\n- H3 (Card titles): 18px/1.125rem, medium\n- Body (default): 14px/0.875rem, regular\n- Small (metadata): 12px/0.75rem, medium\n- Mono (IDs/timestamps): 13px/0.8125rem, JetBrains Mono\n\n## Spacing System\n**Tailwind Units:** Use 2, 3, 4, 6, 8, 12, 16 for consistent rhythm\n- Component padding: p-4 to p-6\n- Card spacing: gap-4\n- Section margins: mb-8 to mb-12\n- Panel padding: p-6 to p-8\n\n## Core Layout Structure\n\n### Main Dashboard View\n**Three-Column Layout:**\n- Left Sidebar (280px fixed): Release list panel with search/filters\n- Center Canvas (flex-1): Interactive flow visualization area\n- Right Panel (340px, slide-in): Context panel for selected items\n\n**Release List Panel (Left Sidebar):**\n- Fixed header with \"Create Release\" button (w-full, h-12)\n- Search input with icon (h-10, mb-4)\n- Scrollable release cards (gap-3):\n  - Card height: min-h-24\n  - Content: Release name, version tag, status badge, progress bar, timestamp\n  - Hover state: subtle lift effect\n\n### Environment Flow Canvas (Center)\n**Node-Based Layout:**\n- Environment boxes displayed as connected nodes (React Flow)\n- Each box dimensions: 240px × 180px, rounded-lg\n- Box contains:\n  - Environment label (top, h-12, px-4)\n  - Status indicator (dot, 8px)\n  - Progress ring or bar\n  - Task count summary (e.g., \"12/15 tasks\")\n  - Last updated timestamp\n- Connection lines: 2px stroke, dashed for pending states\n\n**Environment Detail View (New Tab):**\n- Full-width header bar (h-16): Breadcrumb nav, environment name, status\n- Task flow area (main content):\n  - Vertical swimlane layout or kanban-style columns\n  - Task cards: 280px wide, min-h-32, gap-3\n  - Branch indicators with connecting lines\n  - Drag-and-drop enabled zones\n\n### Task Card Design\n**Compact Card (280px × auto):**\n- Header (h-10): Task title, status icon\n- Body (p-3):\n  - Owner avatar + name\n  - Priority badge (if set)\n  - Due date (if set)\n  - Evidence/attachment count\n- Footer (h-8): Last updated, comment count\n\n### Task Popup Menu\n**Modal Dialog (560px wide):**\n- Header (h-14): Task title (editable), close button\n- Tabbed content area:\n  - Tab 1 - Checklist: Checkbox items with owner, status\n  - Tab 2 - Details: Description, attachments, evidence links\n  - Tab 3 - Activity: Timeline of changes\n- Checklist items (each h-12):\n  - Checkbox (left)\n  - Item text\n  - Owner avatar (right)\n  - Status dropdown\n- Footer (h-16): Action buttons (Save, Cancel)\n\n## Component Library\n\n**Buttons:**\n- Primary: h-10, px-6, rounded-md, medium weight\n- Secondary: h-10, px-6, rounded-md, border-2\n- Icon button: h-10, w-10, rounded-md\n- Floating action: h-14, w-14, rounded-full, shadow-lg (for \"Create Release\")\n\n**Status Badges:**\n- Pill shape: h-6, px-3, rounded-full, text-xs, uppercase\n- States: Not Started, In Progress, Blocked, Done\n\n**Input Fields:**\n- Text input: h-10, px-4, rounded-md, border-2\n- Textarea: min-h-24, p-3, rounded-md\n- Select dropdown: h-10, px-4, rounded-md\n\n**Cards:**\n- Standard card: rounded-lg, border-2, p-4 to p-6\n- Interactive card: Add shadow on hover, transition-all duration-200\n\n**Navigation:**\n- Top bar: h-16, fixed, contains logo, theme toggle, user menu\n- Breadcrumbs: h-10, text-sm, gap-2 with separator icons\n- Tab navigation: h-12, border-b-2, active tab has bottom border accent\n\n**Theme Toggle:**\n- Position: Top-right corner of header\n- Style: Icon button (moon/sun), h-10, w-10\n- Smooth transition between themes (transition-colors duration-300)\n\n**Progress Indicators:**\n- Linear bar: h-2, rounded-full, overflow hidden\n- Circular: 48px diameter for environment boxes, 24px for task cards\n\n## Accessibility\n- All interactive elements: min-height 44px (touch target)\n- Form inputs: Proper labels, error states with aria-invalid\n- Focus states: 2px outline offset by 2px\n- Color contrast: WCAG AA minimum for all text\n- Keyboard navigation: Full support with visible focus indicators\n\n## Visual Patterns\n- Consistent border radius: Use rounded-md (6px) for most elements, rounded-lg (8px) for cards\n- Shadows: Minimal use - only for elevated elements (modals, dropdowns, floating buttons)\n- Transitions: Use sparingly - 200ms for hover states, 300ms for theme changes\n- Icons: 20px × 20px standard, 16px for inline, 24px for headers (Heroicons)\n- Dividers: 1px borders, use gap spacing instead where possible\n\n## Animations\n- Minimize motion: Only essential feedback (button press, modal open/close)\n- No scroll-triggered animations\n- No parallax effects\n- Card hover: Subtle scale (1.02) and shadow increase\n\nThis design creates a professional, efficient release management interface optimized for developer workflows with clear information hierarchy and minimal visual distraction.","size_bytes":5204},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"server/db.ts":{"content":"import \"dotenv/config\";\nimport * as schema from \"@shared/schema\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\n// Detect if this is a Neon Database connection or regular PostgreSQL\n// Neon connections typically contain 'neon.tech' in the hostname\n// Local connections use 'localhost' or '127.0.0.1'\nconst isNeonConnection = process.env.DATABASE_URL.includes('neon.tech');\n\nlet pool: any;\nlet db: any;\n\nif (isNeonConnection) {\n  // Use Neon serverless driver for Neon Database\n  const { Pool: NeonPool, neonConfig } = await import('@neondatabase/serverless');\n  const { drizzle: neonDrizzle } = await import('drizzle-orm/neon-serverless');\n  const wsModule = await import(\"ws\");\n  const ws = wsModule.default || wsModule;\n  \n  neonConfig.webSocketConstructor = ws;\n  pool = new NeonPool({ connectionString: process.env.DATABASE_URL });\n  db = neonDrizzle({ client: pool, schema });\n} else {\n  // Use regular PostgreSQL driver for local or other PostgreSQL databases\n  const { Pool: PgPool } = await import('pg');\n  const { drizzle: pgDrizzle } = await import('drizzle-orm/node-postgres');\n  \n  pool = new PgPool({ connectionString: process.env.DATABASE_URL });\n  db = pgDrizzle({ client: pool, schema });\n}\n\nexport { pool, db };\n","size_bytes":1317},"client/src/lib/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\";\n\ninterface ThemeContextValue {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    const stored = localStorage.getItem(\"theme\");\n    return (stored as Theme) || \"light\";\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme((prev) => (prev === \"light\" ? \"dark\" : \"light\"));\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within ThemeProvider\");\n  }\n  return context;\n}\n","size_bytes":1088},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/pages/Dashboard.tsx":{"content":"import { useState } from \"react\";\nimport ReleaseListPanel from \"@/components/ReleaseListPanel\";\nimport EnvironmentFlowCanvas from \"@/components/EnvironmentFlowCanvas\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport { useLocation, useRoute } from \"wouter\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Anchor, LogOut, Users, ArrowLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTeams } from \"@/hooks/useTeams\";\n\nexport default function Dashboard() {\n  const [, params] = useRoute<{ projectId: string }>(\"/project/:projectId\");\n  const [, setLocation] = useLocation();\n  const [selectedRelease, setSelectedRelease] = useState<string | null>(null);\n  const { user, logoutMutation } = useAuth();\n  const { data: teams = [] } = useTeams();\n  const projectId = params?.projectId;\n  const currentProject = teams.find(t => t.id === projectId);\n\n  const handleReleaseClick = (releaseId: string) => {\n    setSelectedRelease(releaseId);\n  };\n\n  const handleEnvironmentClick = (envId: string) => {\n    if (selectedRelease) {\n      setLocation(`/environment/${envId}?releaseId=${selectedRelease}`);\n    }\n  };\n\n  const handleLogout = () => {\n    logoutMutation.mutate();\n  };\n\n  if (!projectId) {\n    setLocation(\"/workspace\");\n    return null;\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col\">\n      <header className=\"h-16 border-b bg-card flex items-center justify-between px-6\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/workspace\")}\n            title=\"Back to Workspace\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <Anchor className=\"w-6 h-6 text-primary\" />\n          <div>\n            <h1 className=\"text-xl font-bold\">DockVoyage</h1>\n            {currentProject && (\n              <p className=\"text-xs text-muted-foreground\">{currentProject.name}</p>\n            )}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {user && (\n            <span className=\"text-sm text-muted-foreground\">\n              Captain {user.username}\n            </span>\n          )}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/team\")}\n            data-testid=\"button-team\"\n            title=\"Manage Crew\"\n          >\n            <Users className=\"h-4 w-4\" />\n          </Button>\n          <ThemeToggle />\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={handleLogout}\n            data-testid=\"button-logout\"\n            title=\"Disembark\"\n          >\n            <LogOut className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"flex-1 flex overflow-hidden\">\n        <ReleaseListPanel projectId={projectId} onReleaseClick={handleReleaseClick} />\n        <div className=\"flex-1\">\n          {selectedRelease ? (\n            <EnvironmentFlowCanvas releaseId={selectedRelease} onEnvironmentClick={handleEnvironmentClick} />\n          ) : (\n            <div className=\"h-full flex items-center justify-center text-muted-foreground\">\n              <div className=\"text-center space-y-2\">\n                <Anchor className=\"w-16 h-16 mx-auto text-muted-foreground\" />\n                <p className=\"text-lg\">Welcome to DockVoyage!</p>\n                <p className=\"text-sm\">Select a voyage to chart your deployment course</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3613},"attached_assets/content-1762582852986.md":{"content":"","size_bytes":0},"client/src/components/examples/EnvironmentNode.tsx":{"content":"import EnvironmentNode from \"../EnvironmentNode\";\n\nexport default function EnvironmentNodeExample() {\n  return (\n    <div className=\"flex gap-4\">\n      <EnvironmentNode\n        id=\"staging\"\n        name=\"Staging Environment\"\n        env=\"staging\"\n        status=\"in_progress\"\n        tasksCompleted={8}\n        tasksTotal={12}\n        lastUpdate=\"1 hour ago\"\n        onClick={() => console.log(\"Staging clicked\")}\n      />\n      <EnvironmentNode\n        id=\"uat\"\n        name=\"UAT Environment\"\n        env=\"uat\"\n        status=\"blocked\"\n        tasksCompleted={3}\n        tasksTotal={10}\n        lastUpdate=\"30 mins ago\"\n        onClick={() => console.log(\"UAT clicked\")}\n      />\n      <EnvironmentNode\n        id=\"prod\"\n        name=\"Production\"\n        env=\"prod\"\n        status=\"done\"\n        tasksCompleted={15}\n        tasksTotal={15}\n        lastUpdate=\"2 days ago\"\n        onClick={() => console.log(\"Production clicked\")}\n      />\n    </div>\n  );\n}\n","size_bytes":958},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/examples/ReleaseCard.tsx":{"content":"import ReleaseCard from \"../ReleaseCard\";\n\nexport default function ReleaseCardExample() {\n  return (\n    <div className=\"w-72\">\n      <ReleaseCard\n        id=\"1\"\n        name=\"Release 2025.11.07\"\n        version=\"v2.5.0\"\n        status=\"in_progress\"\n        progress={65}\n        updatedAt=\"2 hours ago\"\n        onClick={() => console.log(\"Release clicked\")}\n      />\n    </div>\n  );\n}\n","size_bytes":386},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/examples/CreateReleaseDialog.tsx":{"content":"import CreateReleaseDialog from \"../CreateReleaseDialog\";\n\nexport default function CreateReleaseDialogExample() {\n  return (\n    <CreateReleaseDialog\n      onCreateRelease={(data) => console.log(\"Release created:\", data)}\n    />\n  );\n}\n","size_bytes":236},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 100%;\n\n  --foreground: 222 15% 12%;\n\n  --border: 220 13% 91%;\n\n  --card: 0 0% 98%;\n\n  --card-foreground: 222 15% 12%;\n\n  --card-border: 220 13% 94%;\n\n  --sidebar: 220 13% 96%;\n\n  --sidebar-foreground: 222 15% 12%;\n\n  --sidebar-border: 220 13% 92%;\n\n  --sidebar-primary: 210 100% 45%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 200 20% 92%;\n\n  --sidebar-accent-foreground: 222 15% 12%;\n\n  --sidebar-ring: 210 100% 45%;\n\n  --popover: 0 0% 96%;\n\n  --popover-foreground: 222 15% 12%;\n\n  --popover-border: 220 13% 90%;\n\n  --primary: 210 100% 45%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 200 20% 92%;\n\n  --secondary-foreground: 222 15% 12%;\n\n  --muted: 220 13% 93%;\n\n  --muted-foreground: 222 15% 45%;\n\n  --accent: 220 15% 92%;\n\n  --accent-foreground: 222 15% 12%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 220 13% 75%;\n  --ring: 210 100% 45%;\n  --chart-1: 210 100% 45%;\n  --chart-2: 170 90% 40%;\n  --chart-3: 195 80% 55%;\n  --chart-4: 40 95% 50%;\n  --chart-5: 350 75% 55%;\n\n  --font-sans: Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: \"JetBrains Mono\", Menlo, Monaco, \"Courier New\", monospace;\n  --radius: .375rem;\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 13% 9% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(220 13% 9% / 0.1);\n  --shadow-sm: 0px 1px 2px 0px hsl(220 13% 9% / 0.06), 0px 1px 3px 0px hsl(220 13% 9% / 0.1);\n  --shadow: 0px 2px 4px -1px hsl(220 13% 9% / 0.06), 0px 4px 6px -1px hsl(220 13% 9% / 0.1);\n  --shadow-md: 0px 4px 6px -1px hsl(220 13% 9% / 0.07), 0px 2px 4px -1px hsl(220 13% 9% / 0.06);\n  --shadow-lg: 0px 10px 15px -3px hsl(220 13% 9% / 0.1), 0px 4px 6px -2px hsl(220 13% 9% / 0.05);\n  --shadow-xl: 0px 20px 25px -5px hsl(220 13% 9% / 0.1), 0px 10px 10px -5px hsl(220 13% 9% / 0.04);\n  --shadow-2xl: 0px 25px 50px -12px hsl(220 13% 9% / 0.25);\n  --tracking-normal: -0.011em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 222 15% 9%;\n\n  --foreground: 0 0% 98%;\n\n  --border: 220 13% 18%;\n\n  --card: 222 15% 11%;\n\n  --card-foreground: 0 0% 98%;\n\n  --card-border: 220 13% 15%;\n\n  --sidebar: 222 15% 13%;\n\n  --sidebar-foreground: 0 0% 98%;\n\n  --sidebar-border: 220 13% 17%;\n\n  --sidebar-primary: 210 100% 55%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 200 15% 20%;\n\n  --sidebar-accent-foreground: 0 0% 98%;\n\n  --sidebar-ring: 210 100% 55%;\n\n  --popover: 222 15% 15%;\n\n  --popover-foreground: 0 0% 98%;\n\n  --popover-border: 220 13% 19%;\n\n  --primary: 210 100% 55%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 200 15% 22%;\n\n  --secondary-foreground: 0 0% 98%;\n\n  --muted: 220 13% 17%;\n\n  --muted-foreground: 0 0% 65%;\n\n  --accent: 220 15% 19%;\n\n  --accent-foreground: 0 0% 98%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 220 13% 35%;\n  --ring: 210 100% 55%;\n  --chart-1: 210 100% 60%;\n  --chart-2: 170 90% 50%;\n  --chart-3: 195 80% 65%;\n  --chart-4: 40 95% 60%;\n  --chart-5: 350 75% 65%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.3);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.4);\n  --shadow-sm: 0px 1px 2px 0px hsl(0 0% 0% / 0.3), 0px 1px 3px 0px hsl(0 0% 0% / 0.4);\n  --shadow: 0px 2px 4px -1px hsl(0 0% 0% / 0.3), 0px 4px 6px -1px hsl(0 0% 0% / 0.4);\n  --shadow-md: 0px 4px 6px -1px hsl(0 0% 0% / 0.35), 0px 2px 4px -1px hsl(0 0% 0% / 0.3);\n  --shadow-lg: 0px 10px 15px -3px hsl(0 0% 0% / 0.4), 0px 4px 6px -2px hsl(0 0% 0% / 0.3);\n  --shadow-xl: 0px 20px 25px -5px hsl(0 0% 0% / 0.4), 0px 10px 10px -5px hsl(0 0% 0% / 0.3);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.5);\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: -1;\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: 999;\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":9467},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"server/index.ts":{"content":"import \"dotenv/config\";\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    // Log the full error in development\n    if (app.get(\"env\") === \"development\") {\n      console.error(\"Error:\", err);\n      if (err.stack) {\n        console.error(\"Stack:\", err.stack);\n      }\n    }\n\n    res.status(status).json({ \n      message,\n      ...(app.get(\"env\") === \"development\" && { \n        error: err.message,\n        stack: err.stack \n      })\n    });\n    \n    // Don't throw in production, just log\n    if (app.get(\"env\") === \"development\") {\n      throw err;\n    }\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen(port, \"0.0.0.0\", () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2619},"client/src/components/TaskCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Handle, Position } from \"reactflow\";\nimport { CheckCircle2, Circle, Clock, AlertCircle, Paperclip } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface TaskCardProps {\n  id: string;\n  title: string;\n  status: \"todo\" | \"doing\" | \"done\" | \"na\";\n  owner?: string;\n  required?: boolean;\n  priority?: \"P1\" | \"P2\" | \"P3\";\n  dueDate?: string;\n  evidenceCount?: number;\n  onClick?: () => void;\n}\n\nconst statusConfig = {\n  todo: { icon: Circle, label: \"To Do\", className: \"text-muted-foreground\" },\n  doing: { icon: Clock, label: \"In Progress\", className: \"text-blue-500\" },\n  done: { icon: CheckCircle2, label: \"Done\", className: \"text-emerald-500\" },\n  na: { icon: AlertCircle, label: \"N/A\", className: \"text-muted-foreground\" },\n};\n\nconst priorityConfig = {\n  P1: { className: \"bg-destructive/10 text-destructive\" },\n  P2: { className: \"bg-amber-500/10 text-amber-600 dark:text-amber-400\" },\n  P3: { className: \"bg-blue-500/10 text-blue-600 dark:text-blue-400\" },\n};\n\nexport default function TaskCard({\n  id,\n  title,\n  status,\n  owner,\n  required,\n  priority,\n  dueDate,\n  evidenceCount,\n  onClick,\n}: TaskCardProps) {\n  const statusInfo = statusConfig[status];\n  const StatusIcon = statusInfo.icon;\n\n  const getInitials = (name: string) => {\n    return name\n      .split(\" \")\n      .map((n) => n[0])\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  return (\n    <>\n      <Handle type=\"target\" position={Position.Left} className=\"!bg-primary\" />\n      <Card\n        className=\"p-3 cursor-pointer hover-elevate active-elevate-2 transition-all w-80\"\n        onClick={onClick}\n        data-testid={`card-task-${id}`}\n      >\n        <div className=\"space-y-3\">\n          <div className=\"flex items-start justify-between gap-2\">\n            <div className=\"flex items-start gap-2 flex-1 min-w-0\">\n              <StatusIcon className={cn(\"h-4 w-4 mt-0.5 flex-shrink-0\", statusInfo.className)} />\n              <div className=\"flex-1 min-w-0\">\n                <h4 className=\"text-sm font-medium line-clamp-2\" data-testid={`text-task-title-${id}`}>\n                  {title}\n                </h4>\n              </div>\n            </div>\n            {required && (\n              <Badge variant=\"outline\" className=\"text-xs flex-shrink-0\">\n                Required\n              </Badge>\n            )}\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              {owner && (\n                <div className=\"flex items-center gap-1.5\">\n                  <Avatar className=\"h-6 w-6\">\n                    <AvatarFallback className=\"text-xs\">{getInitials(owner)}</AvatarFallback>\n                  </Avatar>\n                  <span className=\"text-xs text-muted-foreground\" data-testid={`text-owner-${id}`}>{owner}</span>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex items-center gap-2\">\n              {priority && (\n                <Badge className={cn(\"text-xs\", priorityConfig[priority].className)} data-testid={`badge-priority-${id}`}>\n                  {priority}\n                </Badge>\n              )}\n              {evidenceCount !== undefined && evidenceCount > 0 && (\n                <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                  <Paperclip className=\"h-3 w-3\" />\n                  <span data-testid={`text-evidence-count-${id}`}>{evidenceCount}</span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {dueDate && (\n            <div className=\"text-xs text-muted-foreground\" data-testid={`text-due-date-${id}`}>\n              Due: {dueDate}\n            </div>\n          )}\n        </div>\n      </Card>\n      <Handle type=\"source\" position={Position.Right} className=\"!bg-primary\" />\n    </>\n  );\n}\n","size_bytes":4018},"client/src/pages/TeamManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Anchor, Users, Mail, UserPlus, Clock, Check, X } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function TeamManagement() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [email, setEmail] = useState(\"\");\n  const [role, setRole] = useState<\"admin\" | \"developer\">(\"developer\");\n\n  const { data: workspaces } = useQuery<any[]>({\n    queryKey: [\"/api/workspaces\"],\n    enabled: !!user,\n  });\n\n  const { data: invitations, isLoading } = useQuery<any[]>({\n    queryKey: [\"/api/invitations\"],\n    enabled: !!user,\n  });\n\n  const sendInviteMutation = useMutation({\n    mutationFn: async (data: { email: string; role: string; workspaceId: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/invitations\", data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/invitations\"] });\n      setEmail(\"\");\n      setRole(\"developer\");\n      toast({\n        title: \"Invitation sent!\",\n        description: \"The team member will receive an email to join your workspace.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to send invitation\",\n        description: error.message || \"Please try again\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSendInvite = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!workspaces || workspaces.length === 0) {\n      toast({\n        title: \"No workspace found\",\n        description: \"Please contact support\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    sendInviteMutation.mutate({\n      email,\n      role,\n      workspaceId: workspaces[0].id,\n    });\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return <Clock className=\"h-4 w-4 text-yellow-500\" />;\n      case \"accepted\":\n        return <Check className=\"h-4 w-4 text-green-500\" />;\n      case \"declined\":\n      case \"expired\":\n        return <X className=\"h-4 w-4 text-red-500\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    return status.charAt(0).toUpperCase() + status.slice(1);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"h-16 border-b bg-card flex items-center justify-between px-6\">\n        <Link href=\"/\">\n          <a className=\"flex items-center gap-3 cursor-pointer\" data-testid=\"link-home\">\n            <Anchor className=\"w-6 h-6 text-primary\" />\n            <h1 className=\"text-xl font-bold\">DockVoyage</h1>\n          </a>\n        </Link>\n      </header>\n\n      <div className=\"container max-w-4xl mx-auto p-6 space-y-6\">\n        <div>\n          <h2 className=\"text-3xl font-bold mb-2\">Team Management</h2>\n          <p className=\"text-muted-foreground\">\n            Invite crew members to join your workspace\n          </p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <UserPlus className=\"h-5 w-5\" />\n              <CardTitle>Invite New Member</CardTitle>\n            </div>\n            <CardDescription>\n              Send an invitation via email. They'll receive a nautical-themed welcome aboard message!\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSendInvite} className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\">Email Address</Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"crew@example.com\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    className=\"pl-10\"\n                    required\n                    data-testid=\"input-invite-email\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"role\">Role</Label>\n                <Select value={role} onValueChange={(value: \"admin\" | \"developer\") => setRole(value)}>\n                  <SelectTrigger id=\"role\" data-testid=\"select-role\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"developer\">Developer</SelectItem>\n                    <SelectItem value=\"admin\">Admin</SelectItem>\n                  </SelectContent>\n                </Select>\n                <p className=\"text-xs text-muted-foreground\">\n                  {role === \"admin\" \n                    ? \"Admins can manage the workspace and invite other members\"\n                    : \"Developers can manage releases and view team data\"}\n                </p>\n              </div>\n\n              <Button \n                type=\"submit\" \n                className=\"w-full\"\n                disabled={sendInviteMutation.isPending}\n                data-testid=\"button-send-invite\"\n              >\n                {sendInviteMutation.isPending ? \"Sending...\" : \"Send Invitation\"}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center gap-2\">\n              <Users className=\"h-5 w-5\" />\n              <CardTitle>Pending & Recent Invitations</CardTitle>\n            </div>\n            <CardDescription>\n              Track all invitations you've sent to your crew\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                Loading invitations...\n              </div>\n            ) : !invitations || invitations.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                No invitations yet. Start by inviting your first crew member!\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {invitations.map((invitation) => (\n                  <div\n                    key={invitation.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors\"\n                    data-testid={`invitation-${invitation.id}`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                        <Mail className=\"h-5 w-5 text-primary\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium\">{invitation.email}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {invitation.role === \"admin\" ? \"Admin\" : \"Developer\"} • Sent{\" \"}\n                          {new Date(invitation.createdAt).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      {getStatusIcon(invitation.status)}\n                      <span className=\"text-sm font-medium\">\n                        {getStatusText(invitation.status)}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8217},"client/src/pages/InviteAccept.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Anchor, Ship, CheckCircle, XCircle, Clock, Loader2 } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport default function InviteAccept() {\n  const [, params] = useRoute(\"/invite/:token\");\n  const [, setLocation] = useLocation();\n  const { user } = useAuth();\n  const token = params?.token;\n\n  const { data: invitation, isLoading, error } = useQuery({\n    queryKey: token ? [`/api/invitations/${token}`] : [\"skip\"],\n    enabled: !!token,\n    retry: false,\n  });\n\n  const acceptMutation = useMutation({\n    mutationFn: async () => {\n      if (!token) throw new Error(\"No invitation token\");\n      const response = await apiRequest(\"POST\", `/api/invitations/${token}/accept`);\n      return response.json();\n    },\n    onSuccess: () => {\n      setTimeout(() => {\n        setLocation(\"/\");\n      }, 2000);\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"pt-6 flex flex-col items-center gap-4\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            <p className=\"text-muted-foreground\">Loading invitation...</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (error || !invitation) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <XCircle className=\"h-16 w-16 text-destructive\" />\n            </div>\n            <CardTitle>Invitation Not Found</CardTitle>\n            <CardDescription>\n              This invitation may have expired or been revoked.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button\n              onClick={() => setLocation(\"/\")}\n              variant=\"outline\"\n              className=\"w-full\"\n              data-testid=\"button-go-home\"\n            >\n              Go to Dashboard\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (acceptMutation.isSuccess) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <CheckCircle className=\"h-16 w-16 text-green-500\" />\n            </div>\n            <CardTitle>Welcome Aboard!</CardTitle>\n            <CardDescription>\n              You've successfully joined {invitation.workspaceName}\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Redirecting to your dashboard...\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (acceptMutation.isError) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <XCircle className=\"h-16 w-16 text-destructive\" />\n            </div>\n            <CardTitle>Error Accepting Invitation</CardTitle>\n            <CardDescription>\n              {(acceptMutation.error as any)?.message || \"Something went wrong. Please try again.\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Button\n              onClick={() => setLocation(\"/\")}\n              variant=\"outline\"\n              className=\"w-full\"\n              data-testid=\"button-go-home\"\n            >\n              Go to Dashboard\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"flex justify-center mb-4\">\n              <Anchor className=\"h-16 w-16 text-primary\" />\n            </div>\n            <CardTitle>Sign In Required</CardTitle>\n            <CardDescription>\n              Please sign in or create an account to accept this invitation\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"p-4 bg-accent rounded-lg\">\n              <p className=\"text-sm font-medium mb-2\">You've been invited to:</p>\n              <p className=\"text-lg font-bold\">{invitation.workspaceName}</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                by {invitation.inviterName}\n              </p>\n            </div>\n            <Button\n              onClick={() => setLocation(\"/auth\")}\n              className=\"w-full\"\n              data-testid=\"button-sign-in\"\n            >\n              Sign In to Accept\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-primary/10 to-background\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex justify-center gap-4 mb-4\">\n            <Ship className=\"h-16 w-16 text-primary/70\" />\n            <Anchor className=\"h-16 w-16 text-primary\" />\n          </div>\n          <CardTitle>You've Been Invited!</CardTitle>\n          <CardDescription>\n            Join {invitation.workspaceName} on DockVoyage\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"p-4 bg-accent rounded-lg space-y-2\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Invited by</p>\n              <p className=\"font-medium\">{invitation.inviterName}</p>\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Your role</p>\n              <p className=\"font-medium\">\n                {invitation.role === \"admin\" ? \"Admin\" : \"Developer\"}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Workspace</p>\n              <p className=\"font-medium\">{invitation.workspaceName}</p>\n            </div>\n          </div>\n\n          <Button\n            onClick={() => acceptMutation.mutate()}\n            disabled={acceptMutation.isPending}\n            className=\"w-full\"\n            data-testid=\"button-accept-invite\"\n          >\n            {acceptMutation.isPending ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Accepting...\n              </>\n            ) : (\n              \"Accept Invitation\"\n            )}\n          </Button>\n\n          <Button\n            onClick={() => setLocation(\"/\")}\n            variant=\"ghost\"\n            className=\"w-full\"\n            data-testid=\"button-decline\"\n          >\n            Maybe Later\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":7836},"client/src/pages/Workspace.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useTeams, useDeleteTeam } from \"@/hooks/useTeams\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Anchor, LogOut, Users, FolderKanban, Plus, Ship, Trash2 } from \"lucide-react\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport CreateProjectDialog from \"@/components/CreateProjectDialog\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Workspace() {\n  const [, setLocation] = useLocation();\n  const { user, logoutMutation } = useAuth();\n  const { data: teams = [], isLoading } = useTeams();\n  const deleteTeam = useDeleteTeam();\n  const { toast } = useToast();\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [projectToDelete, setProjectToDelete] = useState<string | null>(null);\n\n  const handleLogout = () => {\n    logoutMutation.mutate();\n  };\n\n  const handleProjectClick = (projectId: string) => {\n    setLocation(`/project/${projectId}`);\n  };\n\n  const handleDeleteClick = (e: React.MouseEvent, projectId: string) => {\n    e.stopPropagation();\n    setProjectToDelete(projectId);\n    setDeleteDialogOpen(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!projectToDelete) return;\n    try {\n      await deleteTeam.mutateAsync(projectToDelete);\n      toast({\n        title: \"Project deleted\",\n        description: \"The project has been successfully deleted.\",\n      });\n      setDeleteDialogOpen(false);\n      setProjectToDelete(null);\n    } catch (error: any) {\n      toast({\n        title: \"Failed to delete project\",\n        description: error.message || \"Please try again\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"h-screen flex flex-col\">\n      <header className=\"h-16 border-b bg-card flex items-center justify-between px-6\">\n        <div className=\"flex items-center gap-3\">\n          <Anchor className=\"w-6 h-6 text-primary\" />\n          <h1 className=\"text-xl font-bold\">DockVoyage</h1>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {user && (\n            <span className=\"text-sm text-muted-foreground\">\n              Captain {user.username}\n            </span>\n          )}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation(\"/team\")}\n            data-testid=\"button-team\"\n            title=\"Manage Crew\"\n          >\n            <Users className=\"h-4 w-4\" />\n          </Button>\n          <ThemeToggle />\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={handleLogout}\n            data-testid=\"button-logout\"\n            title=\"Disembark\"\n          >\n            <LogOut className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"flex-1 overflow-y-auto bg-background\">\n        <div className=\"container max-w-7xl mx-auto p-6\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-3xl font-bold mb-2\">Your Projects</h2>\n            <p className=\"text-muted-foreground\">\n              Select a project to view its voyages, or create a new project to get started\n            </p>\n          </div>\n\n          {isLoading ? (\n            <div className=\"text-center py-12 text-muted-foreground\">\n              Loading projects...\n            </div>\n          ) : teams.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"max-w-md mx-auto\">\n                <FolderKanban className=\"w-16 h-16 mx-auto text-muted-foreground mb-4\" />\n                <h3 className=\"text-xl font-semibold mb-2\">No Projects Yet</h3>\n                <p className=\"text-muted-foreground mb-6\">\n                  Create your first project to start organizing your releases and deployments\n                </p>\n                <CreateProjectDialog />\n              </div>\n            </div>\n          ) : (\n            <>\n              <div className=\"mb-6\">\n                <CreateProjectDialog />\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {teams.map((team) => (\n                  <Card\n                    key={team.id}\n                    className=\"cursor-pointer hover:shadow-lg transition-shadow relative group\"\n                    onClick={() => handleProjectClick(team.id)}\n                    data-testid={`project-card-${team.id}`}\n                  >\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex items-center gap-3 flex-1\">\n                          <div className=\"h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center\">\n                            <Ship className=\"h-6 w-6 text-primary\" />\n                          </div>\n                          <div className=\"flex-1\">\n                            <CardTitle className=\"text-lg\">{team.name}</CardTitle>\n                            {team.description && (\n                              <CardDescription className=\"mt-1\">\n                                {team.description}\n                              </CardDescription>\n                            )}\n                          </div>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"icon\"\n                          className=\"opacity-0 group-hover:opacity-100 transition-opacity\"\n                          onClick={(e) => handleDeleteClick(e, team.id)}\n                          data-testid={`delete-project-${team.id}`}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"text-xs text-muted-foreground\">\n                        Created {formatDistanceToNow(new Date(team.createdAt), { addSuffix: true })}\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n              <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n                <AlertDialogContent>\n                  <AlertDialogHeader>\n                    <AlertDialogTitle>Delete Project?</AlertDialogTitle>\n                    <AlertDialogDescription>\n                      This action cannot be undone. This will permanently delete the project\n                      and all its voyages, releases, and associated data.\n                    </AlertDialogDescription>\n                  </AlertDialogHeader>\n                  <AlertDialogFooter>\n                    <AlertDialogCancel>Cancel</AlertDialogCancel>\n                    <AlertDialogAction\n                      onClick={handleDeleteConfirm}\n                      className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                      disabled={deleteTeam.isPending}\n                    >\n                      {deleteTeam.isPending ? \"Deleting...\" : \"Delete\"}\n                    </AlertDialogAction>\n                  </AlertDialogFooter>\n                </AlertDialogContent>\n              </AlertDialog>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","size_bytes":7772},"server/email.ts":{"content":"import { Resend } from 'resend';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY \n    ? 'repl ' + process.env.REPL_IDENTITY \n    : process.env.WEB_REPL_RENEWAL \n    ? 'depl ' + process.env.WEB_REPL_RENEWAL \n    : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  connectionSettings = await fetch(\n    'https://' + hostname + '/api/v2/connection?include_secrets=true&connector_names=resend',\n    {\n      headers: {\n        'Accept': 'application/json',\n        'X_REPLIT_TOKEN': xReplitToken\n      }\n    }\n  ).then(res => res.json()).then(data => data.items?.[0]);\n\n  if (!connectionSettings || (!connectionSettings.settings.api_key)) {\n    throw new Error('Resend not connected');\n  }\n  return {apiKey: connectionSettings.settings.api_key, fromEmail: connectionSettings.settings.from_email};\n}\n\nasync function getUncachableResendClient() {\n  const {apiKey, fromEmail} = await getCredentials();\n  return {\n    client: new Resend(apiKey),\n    fromEmail\n  };\n}\n\nexport async function sendInvitationEmail(\n  toEmail: string,\n  inviterName: string,\n  workspaceName: string,\n  role: string,\n  invitationToken: string,\n  baseUrl?: string\n) {\n  const { client, fromEmail } = await getUncachableResendClient();\n  \n  // Use provided baseUrl or construct from environment\n  const host = baseUrl || process.env.REPLIT_DEV_DOMAIN || process.env.REPLIT_DOMAINS?.split(',')[0];\n  if (!host) {\n    throw new Error(\"No valid host URL available for invitation email. Please configure REPLIT_DEV_DOMAIN or REPLIT_DOMAINS.\");\n  }\n  const acceptUrl = `https://${host}/invite/${invitationToken}`;\n  \n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <style>\n          * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n          }\n          body {\n            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            background-attachment: fixed;\n            margin: 0;\n            padding: 20px;\n            line-height: 1.6;\n          }\n          .email-wrapper {\n            max-width: 600px;\n            margin: 0 auto;\n          }\n          .container {\n            background-color: #ffffff;\n            border-radius: 20px;\n            overflow: hidden;\n            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n          }\n          .header {\n            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);\n            color: white;\n            padding: 50px 30px;\n            text-align: center;\n            position: relative;\n            overflow: hidden;\n          }\n          .header::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 120\" preserveAspectRatio=\"none\"><path d=\"M0,0 C150,80 350,80 600,40 C850,0 1050,0 1200,40 L1200,120 L0,120 Z\" fill=\"rgba(255,255,255,0.1)\"/></svg>') no-repeat bottom;\n            background-size: cover;\n            opacity: 0.3;\n          }\n          .header-content {\n            position: relative;\n            z-index: 1;\n          }\n          .ship-icon {\n            font-size: 64px;\n            margin-bottom: 15px;\n            display: block;\n            animation: float 3s ease-in-out infinite;\n          }\n          @keyframes float {\n            0%, 100% { transform: translateY(0px); }\n            50% { transform: translateY(-10px); }\n          }\n          .header h1 {\n            margin: 0;\n            font-size: 36px;\n            font-weight: 700;\n            letter-spacing: -0.5px;\n            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          }\n          .header .subtitle {\n            margin: 15px 0 0 0;\n            font-size: 18px;\n            opacity: 0.95;\n            font-weight: 500;\n          }\n          .wave-divider {\n            height: 60px;\n            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);\n            position: relative;\n            overflow: hidden;\n          }\n          .wave-divider::after {\n            content: '';\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            height: 30px;\n            background: white;\n            border-radius: 50% 50% 0 0 / 100% 100% 0 0;\n            transform: scaleX(1.2);\n          }\n          .content {\n            padding: 50px 40px;\n            background: white;\n          }\n          .journey-section {\n            text-align: center;\n            margin-bottom: 40px;\n          }\n          .journey-title {\n            font-size: 28px;\n            font-weight: 700;\n            color: #1e3a8a;\n            margin-bottom: 15px;\n            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n            background-clip: text;\n          }\n          .journey-text {\n            font-size: 18px;\n            color: #475569;\n            line-height: 1.8;\n            margin-bottom: 10px;\n          }\n          .inviter-highlight {\n            color: #1e3a8a;\n            font-weight: 600;\n          }\n          .workspace-highlight {\n            color: #3b82f6;\n            font-weight: 600;\n          }\n          .info-box {\n            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n            border: 2px solid #3b82f6;\n            border-radius: 16px;\n            padding: 25px;\n            margin: 30px 0;\n            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);\n          }\n          .info-box-title {\n            font-size: 14px;\n            font-weight: 600;\n            color: #1e40af;\n            text-transform: uppercase;\n            letter-spacing: 1px;\n            margin-bottom: 10px;\n          }\n          .info-box-content {\n            font-size: 16px;\n            color: #1e40af;\n            font-weight: 500;\n          }\n          .role-badge {\n            display: inline-block;\n            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n            color: white;\n            padding: 8px 16px;\n            border-radius: 20px;\n            font-size: 14px;\n            font-weight: 600;\n            margin-top: 8px;\n            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n          }\n          .features {\n            margin: 40px 0;\n            padding: 30px;\n            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n            border-radius: 16px;\n          }\n          .features-title {\n            font-size: 20px;\n            font-weight: 600;\n            color: #1e293b;\n            margin-bottom: 20px;\n            text-align: center;\n          }\n          .feature-item {\n            display: flex;\n            align-items: center;\n            margin-bottom: 15px;\n            padding: 12px;\n            background: white;\n            border-radius: 10px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n          }\n          .feature-icon {\n            font-size: 24px;\n            margin-right: 15px;\n            width: 40px;\n            text-align: center;\n          }\n          .feature-text {\n            font-size: 15px;\n            color: #475569;\n            flex: 1;\n          }\n          .cta-section {\n            text-align: center;\n            margin: 40px 0;\n          }\n          .button {\n            display: inline-block;\n            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n            color: white;\n            text-decoration: none;\n            padding: 18px 48px;\n            border-radius: 50px;\n            font-weight: 700;\n            font-size: 18px;\n            margin: 20px 0;\n            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);\n            transition: all 0.3s ease;\n            letter-spacing: 0.5px;\n            text-transform: uppercase;\n            position: relative;\n            overflow: hidden;\n          }\n          .button::before {\n            content: '🚢';\n            margin-right: 8px;\n          }\n          .button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 12px 28px rgba(59, 130, 246, 0.5);\n          }\n          .expiry-notice {\n            text-align: center;\n            font-size: 14px;\n            color: #64748b;\n            margin-top: 30px;\n            padding: 20px;\n            background: #f8fafc;\n            border-radius: 12px;\n            border-left: 4px solid #94a3b8;\n          }\n          .footer {\n            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n            color: white;\n            padding: 40px 30px;\n            text-align: center;\n          }\n          .footer-logo {\n            font-size: 24px;\n            font-weight: 700;\n            margin-bottom: 10px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n          }\n          .footer-tagline {\n            font-size: 16px;\n            opacity: 0.9;\n            margin-bottom: 20px;\n          }\n          .footer-message {\n            font-size: 14px;\n            opacity: 0.7;\n            font-style: italic;\n          }\n          .divider {\n            height: 1px;\n            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n            margin: 30px 0;\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"email-wrapper\">\n          <div class=\"container\">\n            <div class=\"header\">\n              <div class=\"header-content\">\n                <span class=\"ship-icon\">🚢</span>\n                <h1>Welcome Aboard, Sailor!</h1>\n                <p class=\"subtitle\">Your Voyage Awaits on DockVoyage</p>\n              </div>\n            </div>\n            \n            <div class=\"wave-divider\"></div>\n            \n            <div class=\"content\">\n              <div class=\"journey-section\">\n                <h2 class=\"journey-title\">⚓ Embark on an Epic Journey</h2>\n                <p class=\"journey-text\">\n                  Ahoy there! <span class=\"inviter-highlight\">${inviterName}</span> has extended an invitation for you to join the crew of <span class=\"workspace-highlight\">${workspaceName}</span> and set sail on an incredible voyage with DockVoyage.\n                </p>\n                <p class=\"journey-text\" style=\"font-size: 16px; margin-top: 15px;\">\n                  Together, we'll navigate the seas of software releases, chart courses through deployment environments, and ensure smooth sailing from development to production. 🌊\n                </p>\n              </div>\n              \n              <div class=\"info-box\">\n                <div class=\"info-box-title\">Your Role on This Voyage</div>\n                <div class=\"info-box-content\">\n                  ${role === 'admin' \n                    ? 'As an <strong>Admin</strong>, you\\'ll have full command of the ship - managing the workspace, inviting crew members, and steering the course of all releases.' \n                    : 'As a <strong>Developer</strong>, you\\'ll be an essential part of the crew - managing releases, tracking deployments, and keeping the voyage on course.'}\n                </div>\n                <div class=\"role-badge\">${role === 'admin' ? '⚡ Captain (Admin)' : '👨‍💻 Crew Member (Developer)'}</div>\n              </div>\n              \n              <div class=\"features\">\n                <div class=\"features-title\">What Awaits You on This Journey</div>\n                <div class=\"feature-item\">\n                  <div class=\"feature-icon\">🗺️</div>\n                  <div class=\"feature-text\"><strong>Track Releases</strong> - Monitor your deployments across all environments in real-time</div>\n                </div>\n                <div class=\"feature-item\">\n                  <div class=\"feature-icon\">⚓</div>\n                  <div class=\"feature-text\"><strong>Manage Flows</strong> - Create visual workflows for your deployment pipeline</div>\n                </div>\n                <div class=\"feature-item\">\n                  <div class=\"feature-icon\">🚨</div>\n                  <div class=\"feature-text\"><strong>Resolve Blockers</strong> - Track and resolve issues to keep your releases on course</div>\n                </div>\n                <div class=\"feature-item\">\n                  <div class=\"feature-icon\">👥</div>\n                  <div class=\"feature-text\"><strong>Team Collaboration</strong> - Work seamlessly with your crew members</div>\n                </div>\n              </div>\n              \n              <div class=\"cta-section\">\n                <a href=\"${acceptUrl}\" class=\"button\">Accept Invitation & Set Sail</a>\n              </div>\n              \n              <div class=\"expiry-notice\">\n                ⏰ <strong>Important:</strong> This invitation will expire in 7 days. If you didn't expect this invitation, you can safely ignore this message.\n              </div>\n            </div>\n            \n            <div class=\"footer\">\n              <div class=\"footer-logo\">\n                <span>⚓</span>\n                <span>DockVoyage</span>\n              </div>\n              <div class=\"footer-tagline\">See your releases clearly</div>\n              <div class=\"divider\"></div>\n              <div class=\"footer-message\">\n                \"The best way to predict the future is to ship it.\" ⛵<br>\n                Setting sail for smoother deployments, one release at a time.\n              </div>\n            </div>\n          </div>\n        </div>\n      </body>\n    </html>\n  `;\n\n  await client.emails.send({\n    from: fromEmail,\n    to: toEmail,\n    subject: `🚢 Embark on a Journey: Join ${workspaceName} on DockVoyage`,\n    html,\n  });\n}\n","size_bytes":14173},"client/src/components/CreateProjectDialog.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Ship, Plus } from \"lucide-react\";\nimport { useCreateTeam } from \"@/hooks/useTeams\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function CreateProjectDialog() {\n  const [open, setOpen] = useState(false);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n  });\n  const createTeam = useCreateTeam();\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      await createTeam.mutateAsync({\n        name: formData.name,\n        description: formData.description || undefined,\n      });\n      setFormData({ name: \"\", description: \"\" });\n      setOpen(false);\n      toast({\n        title: \"Project created!\",\n        description: `${formData.name} is ready for voyages.`,\n      });\n    } catch (error: any) {\n      toast({\n        title: \"Failed to create project\",\n        description: error.message || \"Please try again\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button className=\"w-full\" data-testid=\"button-create-project\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add New Project\n        </Button>\n      </DialogTrigger>\n      <DialogContent data-testid=\"dialog-create-project\">\n        <form onSubmit={handleSubmit}>\n          <DialogHeader>\n            <DialogTitle>Create New Project</DialogTitle>\n            <DialogDescription>\n              Set up a new project to organize your releases and deployments\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"project-name\">Project Name</Label>\n              <Input\n                id=\"project-name\"\n                placeholder=\"e.g., Data Engineering, Full Stack, Mobile App\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                required\n                data-testid=\"input-project-name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"project-description\">Description (Optional)</Label>\n              <Textarea\n                id=\"project-description\"\n                placeholder=\"Describe what this project is about...\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                rows={3}\n                data-testid=\"input-project-description\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => setOpen(false)}\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={createTeam.isPending || !formData.name.trim()}\n              data-testid=\"button-submit-project\"\n            >\n              {createTeam.isPending ? \"Creating...\" : \"Create Project\"}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n","size_bytes":3614},"client/src/hooks/useTeams.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport interface Team {\n  id: string;\n  name: string;\n  description?: string;\n  workspaceId: string;\n  createdAt: string;\n}\n\nexport interface CreateTeamData {\n  name: string;\n  description?: string;\n}\n\nexport function useTeams() {\n  return useQuery<Team[]>({\n    queryKey: [\"/api/teams\"],\n  });\n}\n\nexport function useCreateTeam() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (data: CreateTeamData) => {\n      const res = await apiRequest(\"POST\", \"/api/teams\", data);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teams\"] });\n    },\n  });\n}\n\nexport function useDeleteTeam() {\n  const queryClient = useQueryClient();\n  \n  return useMutation({\n    mutationFn: async (teamId: string) => {\n      const res = await apiRequest(\"DELETE\", `/api/teams/${teamId}`);\n      return res;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teams\"] });\n    },\n  });\n}\n\n","size_bytes":1123}},"version":2}